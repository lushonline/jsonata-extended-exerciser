(this["webpackJsonpjsonata-extended-exerciser"]=this["webpackJsonpjsonata-extended-exerciser"]||[]).push([[0],{256:function(e){e.exports=JSON.parse('{"a":"1.0.0"}')},262:function(e,t,a){e.exports=a(363)},267:function(e,t,a){},361:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var n=a(7),o=a.n(n),r=a(118),i=a.n(r),s=(a(267),a(133)),c=a(134),l=a(137),d=a(136),u=a(205),m={invoice:{Account:{"Account Name":"Firefly",Order:[{OrderID:"order103",Product:[{"Product Name":"Bowler Hat",ProductID:858383,SKU:"0406654608",Description:{Colour:"Purple",Width:300,Height:200,Depth:210,Weight:.75},Price:34.45,Quantity:2},{"Product Name":"Trilby hat",ProductID:858236,SKU:"0406634348",Description:{Colour:"Orange",Width:300,Height:200,Depth:210,Weight:.6},Price:21.67,Quantity:1}]},{OrderID:"order104",Product:[{"Product Name":"Bowler Hat",ProductID:858383,SKU:"040657863",Description:{Colour:"Purple",Width:300,Height:200,Depth:210,Weight:.75},Price:34.45,Quantity:4},{ProductID:345664,SKU:"0406654603","Product Name":"Cloak",Description:{Colour:"Black",Width:30,Height:20,Depth:210,Weight:2},Price:107.99,Quantity:1}]}]}},address:{FirstName:"Fred",Surname:"Smith",Age:28,Address:{Street:"Hursley Park",City:"Winchester",Postcode:"SO21 2JN"},Phone:[{type:"home",number:"0203 544 1234"},{type:"office",number:"01962 001234"},{type:"office",number:"01962 001235"},{type:"mobile",number:"077 7700 1234"}],Email:[{type:"office",address:["fred.smith@my-work.com","fsmith@my-work.com"]},{type:"home",address:["freddy@my-social.com","frederic.smith@very-serious.com"]}],Other:{"Over 18 ?":!0,Misc:null,"Alternative.Address":{Street:"Brick Lane",City:"London",Postcode:"E1 6RF"}}},schema:{$schema:"http://json-schema.org/draft-04/schema#",required:["Account"],type:"object",id:"file://input-schema.json",properties:{Account:{required:["Order"],type:"object",properties:{Customer:{required:["First Name","Surname"],type:"object",properties:{"First Name":{type:"string"},Surname:{type:"string"}}},AccID:{type:"string"},Order:{items:{required:["OrderID","Product"],type:"object",properties:{OrderID:{type:"string"},Product:{items:{required:["ProductID","Product Name","Price","Quantity"],type:"object",properties:{SKU:{type:"string"},Description:{type:"object",properties:{Width:{type:"integer"},Depth:{type:"integer"},Weight:{type:"number"},Colour:{type:"string"},Material:{type:"string"},Height:{type:"integer"}}},"Product Name":{type:"string"},Price:{type:"number"},Quantity:{type:"integer"},ProductID:{type:"integer"}}},type:"array"}}},type:"array"},"Account Name":{type:"string"},Address:{required:["Address Line 1","City","Postcode"],type:"object",properties:{"Address Line 1":{type:"string"},"Address Line 2":{type:"string"},Postcode:{type:"string"},City:{type:"string"}}}}}}},library:{library:{books:[{title:"Structure and Interpretation of Computer Programs",authors:["Abelson","Sussman"],isbn:"9780262510875",price:38.9,copies:2},{title:"The C Programming Language",authors:["Kernighan","Richie"],isbn:"9780131103627",price:33.59,copies:3},{title:"The AWK Programming Language",authors:["Aho","Kernighan","Weinberger"],isbn:"9780201079814",copies:1},{title:"Compilers: Principles, Techniques, and Tools",authors:["Aho","Lam","Sethi","Ullman"],isbn:"9780201100884",price:23.38,copies:1}],loans:[{customer:"10001",isbn:"9780262510875",return:"2016-12-05"},{customer:"10003",isbn:"9780201100884",return:"2016-10-22"},{customer:"10003",isbn:"9780262510875",return:"2016-12-22"}],customers:[{id:"10001",name:"Joe Doe",address:{street:"2 Long Road",city:"Winchester",postcode:"SO22 5PU"}},{id:"10002",name:"Fred Bloggs",address:{street:"56 Letsby Avenue",city:"Winchester",postcode:"SO22 4WD"}},{id:"10003",name:"Jason Arthur",address:{street:"1 Preddy Gate",city:"Southampton",postcode:"SO14 0MG"}}]}},empty:{}},h={transforms:[{id:"a248b600-8351-4bf4-9445-dbc716b1374d",name:"Invoice",transform:"$sum(Account.Order.Product.(Price * Quantity))",description:"JSONata transform for Invoice",jsondata:"invoice",isActive:!0},{id:"403d9ad1-84f8-4f18-92fe-0f30dd03291e",name:"Address",transform:"{\n  'name': FirstName & ' ' & Surname,\n  'mobile': Phone[type = 'mobile'].number\n}",description:"JSONata transform for Address",jsondata:"address",isActive:!0},{id:"e90d3a1b-b78a-4e21-b4bd-0e409882e151",name:"Schema",transform:"**.properties ~> $keys()",description:"JSONata transform for Schema",jsondata:"schema",isActive:!0},{id:"290207d3-8e18-4c25-af31-738feff4c477",name:"Library",transform:"library.loans @ $L.books @ $B[$L.isbn = $B.isbn].customers[$L.customer = id].{\n  'customer': name,\n  'book': $B.title,\n  'due': $L.return\n}",description:"JSONata transform for Library",jsondata:"library",isActive:!0}]},p=a(210),g=a.n(p),b=a(260),f=a(144),v=a(253),E=a(258),y={tokenizer:{root:[[/\/\*.*\*\//,"jsonata-comment"],[/'.*'/,"jsonata-string"],[/".*"/,"jsonata-string"],[/\$[a-zA-Z0-9_]*/,"jsonata-variable"],[/[a-zA-Z0-9_]+/,"jsonata-names"]]}},A=a(259),j=Object(A.a)([]);function k(e,t){return j.map((function(a,n,o){var r={};if(r.label="$".concat(a.label),r.kind=e.languages.CompletionItemKind.Function,r.insertText="",r.insertTextRules=e.languages.CompletionItemInsertTextRule.InsertAsSnippet,r.documentation={},r.documentation.value=a.description,a.parameters){var i=r.documentation.value;if(i+="\n\n",i+="**Parameters**\n\n",a.parameters&&0!==a.parameters.length){var s="";a.parameters.forEach((function(e,t,a){var n=e.defaultIsJSONata?"\\"+e.default:e.default;s+="{".concat(e.type,"} ").concat(e.optional?"".concat(e.default?"[".concat(e.label,"=").concat(n,"]"):"[".concat(e.label,"]")):"".concat(e.default?"".concat(e.label,"=").concat(n):"".concat(e.label))),s+=e.optional?" *OPTIONAL*\n\n":"\n\n",s+="".concat(e.documentation,"\n\n")})),i+=s.slice(0,-1)}r.documentation.value=i}if(a.returns){var c=r.documentation.value;c+="\n\n",c+="**Returns**\n\n",c+="{".concat(a.returns,"}\n\n"),r.documentation.value=c}if(r.detail=a.signature,a.parameters){var l=r.label;if(l+="(",a.parameters&&0!==a.parameters.length){var d="";a.parameters.forEach((function(e,t,a){d+="".concat(e.label,",")})),l+=d.slice(0,-1)}l+=")",r.detail=l}if(r.insertText=a.label,a.parameters){var u=r.insertText;if(u+="(",a.parameters&&0!==a.parameters.length){var m="";a.parameters.forEach((function(e,t,a){var n=e.defaultIsJSONata?"\\"+e.default:e.default;m+="${".concat(t+1,":").concat(e.default?n:e.label,"}, ")})),u+=m.slice(0,-2)}u+=")",r.insertText=u}return r.range=t,r}))}var N=function(e){e.languages.register({id:"jsonata"}),e.languages.setMonarchTokensProvider("jsonata",y);var t=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}];e.languages.setLanguageConfiguration("jsonata",{brackets:[["(",")"],["[","]"],["{","}"]],autoClosingPairs:t,surroundingPairs:t,indentationRules:{decreaseIndentPattern:/^((?!.*?\/\*).*\*\/)?\s*[}\])].*$/,increaseIndentPattern:/^((?!\/\/).)*(\{[^}"'`]*|\([^)"'`]*|\[[^\]"'`]*)$/},insertSpaces:!0,tabSize:2}),e.editor.defineTheme("jsonataTheme",{base:"vs",inherit:!0,rules:[{token:"jsonata-string",foreground:"a00000"},{token:"jsonata-comment",foreground:"008000"},{token:"jsonata-variable",foreground:"ff4000"},{token:"jsonata-names",foreground:"0000c0"}]}),e.languages.registerCompletionItemProvider("jsonata",{provideCompletionItems:function(t,a){var n=t.getWordUntilPosition(a),o={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn};return{suggestions:k(e,o)}}}),e.languages.registerHoverProvider("jsonata",{provideHover:function(e,t){var a=e.getWordAtPosition(t);if(a){var n={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:a.startColumn,endColumn:a.endColumn},o=j.reduce((function(e,t,a,n){var o=t.description;if(t.parameters&&(o+="\n\n",o+="**Parameters**\n\n",t.parameters&&0!==t.parameters.length)){var r="";t.parameters.forEach((function(e,t,a){var n=e.defaultIsJSONata?"\\"+e.default:e.default;r+="{".concat(e.type,"} ").concat(e.optional?"".concat(e.default?"[".concat(e.label,"=").concat(n,"]"):"[".concat(e.label,"]")):"".concat(e.default?"".concat(e.label,"=").concat(n):"".concat(e.label))),r+=e.optional?" *OPTIONAL*\n\n":"\n\n",r+="".concat(e.documentation,"\n\n")})),o+=r.slice(0,-1)}t.returns&&(o+="\n\n",o+="**Returns**\n\n",o+="{".concat(t.returns,"}\n\n"));var i="$".concat(t.label,"()");if(t.parameters){var s="$".concat(t.label);if(s+="(",t.parameters&&0!==t.parameters.length){var c="";t.parameters.forEach((function(e,t,a){c+="".concat(e.label,",")})),s+=c.slice(0,-1)}i=s+=")"}return e[t.label]=[{value:"**".concat(i,"**")},{value:o}],e}),{})[a.word];if(o)return{range:n,contents:o}}return null}})},O=a(153),S=a(93),D=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onFormatClick=n.onFormatClick.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"onFormatClick",value:function(e,t){this.props.formatEnabled&&this.props.onFormatClick&&this.props.onFormatClick(e,t)}},{key:"render",value:function(){var e,t,a=this.props,n=a.label,r=a.formatEnabled,i=a.formatLabel,s=a.className,c=a.moreinfo,l=a.moreinfolabel;return r&&(e=o.a.createElement(S.a,null,o.a.createElement(S.a.Link,{onClick:this.onFormatClick},i))),c&&(t=o.a.createElement(S.a.Link,{href:c,target:"_blank"},o.a.createElement("div",{className:"font-weight-light"},l))),o.a.createElement("div",{className:s},o.a.createElement(O.a,{className:"py-0 mt-0",bg:"light",variant:"light"},o.a.createElement(S.a,{className:"mr-auto"},o.a.createElement(O.a.Text,{className:""},o.a.createElement("strong",null,n)),t),e))}}]),a}(n.Component);D.defaultProps={label:"Header",formatEnabled:!0,formatLabel:"Format",onFormatClick:function(){},className:"editor-nav"};var C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).monacoEditor=null,n.monaco=null,n.editorDidMount=n.editorDidMount.bind(Object(f.a)(n)),n._onFormatClick=n._onFormatClick.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"getModel",value:function(){if(null!=this.monacoEditor)return this.monacoEditor.getModel()}},{key:"layout",value:function(){null!=this.monacoEditor&&this.monacoEditor.layout()}},{key:"clearDecorations",value:function(){null!=this.monacoEditor&&(this.monacoEditor.decorations=this.monacoEditor.deltaDecorations(this.monacoEditor.decorations,[]))}},{key:"addErrorDecoration",value:function(e,t){if(null!=this.monacoEditor){var a=this.monacoEditor.getModel().getValue(),n=function(e){for(var t=1,n=1,o=1;o<e;)"\n"===a.charAt(o)?(t++,n=0):n++,o++;return{line:t,column:n}},o=n(e),r=n(t);this.monacoEditor.decorations=this.monacoEditor.deltaDecorations(this.monacoEditor.decorations,[{range:new this.monaco.Range(o.line,o.column,r.line,r.column),options:{inlineClassName:"jsonataErrorMarker"}},{range:new this.monaco.Range(o.line,1,r.line,1),options:{isWholeLine:!0,linesDecorationsClassName:"jsonataErrorMargin"}}])}}},{key:"updateNoUndo",value:function(e){var t=this.getModel();t.applyEdits([{range:new this.monaco.Range(1,1,t.getLineCount(),t.getLineMaxColumn(t.getLineCount())),text:e}])}},{key:"_onFormatClick",value:function(e,t){if(this.props.formatEnabled&&"json"===this.props.language){var a=this.getModel(),n=JSON.stringify(JSON.parse(a.getValue()),null,2);this.updateNoUndo(n)}}},{key:"addErrorDecorationFromErr",value:function(e){var t=0,a=0;if("json"===this.props.language){var n=e.message.indexOf("at position ");-1!==n&&(a=(t=parseInt(e.message.substr(n+12))+1)+1)}"jsonata"===this.props.language&&(t=(a=e.position+1)-(e.token?e.token.length:1)),null!=this.monacoEditor&&t!==a&&this.addErrorDecoration(t,a)}},{key:"componentWillUnmount",value:function(){this.monacoEditor=null,this.monaco=null}},{key:"editorDidMount",value:function(e,t){e.decorations=[],"jsonata"===this.props.language&&(N(t),t.editor.setModelLanguage(e.getModel(),"jsonata"),e.addAction({id:"jsonata-lambda",label:"Lambda",keybindings:[t.KeyCode.F11],run:function(e){return e.trigger("keyboard","type",{text:"\u03bb"}),null}})),this.monacoEditor=e,this.monaco=t,this.props.editorDidMount&&this.props.editorDidMount(this,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,n=t.height,r=(t.readOnly,t.value),i=t.formatEnabled,s=t.label,c=t.options,l=void 0===c?{}:c,d=(t.editorDidMount,t.className),m=t.moreinfo,h=t.moreinfolabel,p=Object(b.a)(t,["width","height","readOnly","value","formatEnabled","label","options","editorDidMount","className","moreinfo","moreinfolabel"]);return o.a.createElement("div",{className:d},o.a.createElement(E.a,{handleWidth:!0,handleHeight:!0,onResize:function(){e.layout()}},o.a.createElement(D,{key:"nav-".concat(s),label:s,formatEnabled:i,onFormatClick:this._onFormatClick,moreinfo:m,moreinfolabel:h}),o.a.createElement(v.default,Object.assign({key:"editor-".concat(s),width:a||"100%",height:n||"100%",value:r,options:Object(u.a)({},l)},p,{editorDidMount:this.editorDidMount}))))}}]),a}(n.Component);C.defaultProps={className:"enhanced-editor",formatEnabled:!0,label:"Editor"};var I=a(244),w=a(208),M=a(206),P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOcSURBVFiF7ZZfaJZVGMB/Z7XKls0/renU0aggsujGovLG6SyIFl2MUXhRRBF0010YIXUVrOg+6aIgyCEZJSJFZEShWQaOSJlSaphb1tawbU039+vinG+9e/e+3/cJUTc+8PF93znn9/w7z3nOgctyWf5nCWUT6mrgZuBG4HfgpxDCqXqUqrcCNwHNwDBwLIRwth6wQX1K/dZiOaw+pzYWsIvUreqxAu6i+oXaoxYHrXaoh0oM5+WIemeGvVc9WSf7uboyb/w29Wxm0cfqo2pLmm9Ru9UPM2vG1U71IXUqE+m76ia1WQ1qm7pF3Z9hT6sdFeNtGe/H1d4a2/Sg+ltm/WT6/Yt6fxUuqM+of6X1x9VW1D1pYFLdUM14Rtld6h+ZiIaMhVcP261OJ253UC8CDcDWEEJfWrQS6AQ6gOXAOPAr8A3wXQhhVn0E+Cjp7Q4h7ElsO7ABaAeWAX8ST8IBYCCEoPoi8CowSyaKXnWZuledtVxOpijWZsbWpq3cV4VTHTTWTW9l4MpsekIIo+o4MAC8D3wPjADXA6uALmAzcBy4IpfdYWAaOAh8ABwFRom9oB14AFgP/Ai0ZPdkLgPp/9WWndU4f036npeBClvGZedLM5DkArBO7QLWADcAkynCg8BnwFSJjWnjSdiY2KXABDBErIF9wPksMM8BdQnwKbCuSiDn1GeJ25Nl24BPgDuqsCPqk6UOhBDG1K+JFb8zGRkDrk0RbQIeBr4i7m2WPaMeBgaBXcAR4BzQRLwXNhMzcyDpmfN8Xg3UK0U1cAlseQ2kQulOXq4hVuwE/9TA7hDCiRLFTYndSDw1LcQsDAP7E3s6D81lQF2inqhxlqfVp/MZMPaBoRrseeONWNoHxtTtxHO7E/iB+Ba4jriPncQa2AW05dgz6tvAojR/NIQwojYTO2pXyszepGNhBko3rTjd/0oNNNRY2GBsz/muV4+RRnVprXULHFBvUfvUQWLTGAGmjNfnG+rtVYzerb6p/kxsVqPGt8KA+oq6qgiqyBb1dfVCjUKaSUbuyYytV3dY/RJTnVC3qY9XBoJq8mWUeH2Sou4Hvky/lwP3AY8BrWnNMLCigD0FvAccIl7FK4jF2wMsXsAWeLndWLlF2WpSXyuJdEZ9Sb2qhG1V+/NQ3oFtZfubU/ZEzokZtadOti/vwA51WH2rHgUZRS9k9Dx/CVxQ3zG+K/uzE0VXcy1FL6dP6fuhhG20Rgv4z+RvCtgtr73fkycAAAAASUVORK5CYII=",T=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onSelect=n.onSelect.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"createSourceItem",value:function(e){return o.a.createElement(I.a.Item,{key:e.id,eventKey:e.id},e.name)}},{key:"createSourceItems",value:function(){var e=this,t=[];return g.a.forEach(this.props.sources,(function(a,n){t.push(e.createSourceItem(a))})),o.a.createElement(I.a,{title:"Select Base Data",id:"nav-selectdata",onSelect:this.onSelect},t)}},{key:"onSelect",value:function(e,t){this.props.onSourceSelect&&this.props.onSourceSelect(e,t)}},{key:"render",value:function(){var e=this.props.version;return o.a.createElement(O.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},o.a.createElement(O.a.Brand,null,"JSONata Extended Excerciser")," ",o.a.createElement(O.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),o.a.createElement(O.a.Collapse,{id:"responsive-navbar-nav"},o.a.createElement(S.a,{className:"mr-auto"},this.createSourceItems()),o.a.createElement(S.a,null,o.a.createElement(S.a.Item,null,o.a.createElement(w.a,{placement:"bottom",overlay:o.a.createElement(M.a,{id:"tooltip-bottom"},"JSONata Extended Documentation.")},o.a.createElement(S.a.Link,{eventKey:"extendedjsonata",href:"https://martinholden-skillsoft.github.io/jsonata-extended/doc/",target:"_blank"},o.a.createElement("img",{src:P,alt:"JSONata Extended Documentation"})))),o.a.createElement(S.a.Item,null,o.a.createElement(w.a,{placement:"bottom",overlay:o.a.createElement(M.a,{id:"tooltip-bottom"},"Core JSONata Documentation")},o.a.createElement(S.a.Link,{eventKey:"corejsonata",href:"https://docs.jsonata.org/overview",target:"_blank"},o.a.createElement("img",{src:P,alt:"Core JSONata Documentation"})))),o.a.createElement(S.a.Item,null,o.a.createElement(w.a,{placement:"bottom",overlay:o.a.createElement(M.a,{id:"tooltip-bottom"},"Source")},o.a.createElement(S.a.Link,{eventKey:"github",href:"https://github.com/martinholden-skillsoft/jsonata-extended-exerciser",target:"_blank"},o.a.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=",alt:"Source"})))),o.a.createElement(S.a.Item,null,o.a.createElement(w.a,{placement:"bottom",overlay:o.a.createElement(M.a,{id:"tooltip-bottom"},"View CHANGELOG")},o.a.createElement(S.a.Link,{eventKey:"changelog",href:"https://github.com/martinholden-skillsoft/jsonata-extended-exerciser/blob/master/CHANGELOG.md",target:"_blank"},o.a.createElement(O.a.Text,{className:"text-muted"}," v".concat(e))))))))}}]),a}(n.Component);T.defaultProps={onSourceSelect:function(){},sources:{},version:""};var J=a(257),W=a(242),B=a(243),F=a(245),L=a(207),U=(a(361),a(256)),R=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),n=t.call(this,e);var o=h;return n.sources=o.transforms.map((function(e,t,a){var n={};return n.id=e.id,n.name="".concat(e.name),n.type=e.jsondata,n.jsonata="".concat(e.transform),n.jsonatabinding={},n})).reduce((function(e,t,a,n){return e[t.id]=t,e}),{}),n.defaults={empty:{id:"empty",name:"Empty",type:"empty",jsonata:"$.{}",jsonatabinding:{}}},n.sources=Object(u.a)(Object(u.a)({},n.defaults),n.sources),n.data={json:JSON.stringify({},null,2),jsonata:"$.{}",jsonatabinding:JSON.stringify({},null,2),result:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.eval()}},{key:"editorOverwrite",value:function(e,t){e&&e.updateNoUndo(t)}},{key:"allEditorsOverwrite",value:function(){this.editorOverwrite(this.jsonEditor,this.data.json),this.editorOverwrite(this.jsonataEditor,this.data.jsonata),this.editorOverwrite(this.jsonatabindingEditor,this.data.jsonatabinding),this.editorOverwrite(this.resultsEditor,this.data.results)}},{key:"jsonEditorDidMount",value:function(e,t){this.jsonEditor=e,this.editorOverwrite(this.jsonEditor,this.data.json)}},{key:"jsonataEditorDidMount",value:function(e,t){this.jsonataEditor=e,this.editorOverwrite(this.jsonataEditor,this.data.jsonata)}},{key:"jsonatabindingEditorDidMount",value:function(e,t){this.jsonatabindingEditor=e,this.editorOverwrite(this.jsonatabindingEditor,this.data.jsonatabinding)}},{key:"resultsEditorDidMount",value:function(e,t){this.resultsEditor=e,this.editorOverwrite(this.resultsEditor,this.data.result)}},{key:"onChangeData",value:function(e,t){this.data.json=e,clearTimeout(this.timer),this.timer=setTimeout(this.eval.bind(this),750),this.clearMarkers()}},{key:"onChangeExpression",value:function(e,t){this.data.jsonata=e,clearTimeout(this.timer),this.timer=setTimeout(this.eval.bind(this),750),this.clearMarkers()}},{key:"onChangejsonatabinding",value:function(e,t){this.data.jsonatabinding=e,clearTimeout(this.timer),this.timer=setTimeout(this.eval.bind(this),750),this.clearMarkers()}},{key:"changeData",value:function(e,t){var a=this.sources[e];this.data={json:JSON.stringify(m[a.type],null,2),jsonata:a.jsonata,jsonatabinding:JSON.stringify(a.jsonatabinding||{},null,2)},this.allEditorsOverwrite(),clearTimeout(this.timer),this.timer=setTimeout(this.eval.bind(this),100),this.clearMarkers()}},{key:"eval",value:function(){var e,t,a,n;if("undefined"!==typeof window.jsonataExtended){try{e=JSON.parse(this.data.json)}catch(o){return this.data.results="ERROR IN INPUT JSON DATA: ".concat(o.message),void this.jsonEditor.addErrorDecorationFromErr(o)}try{a=JSON.parse(this.data.jsonatabinding)}catch(o){return this.data.results="ERROR IN BASE CONFIGURATION JSON DATA: ".concat(o.message),void this.jsonatabindingEditor.addErrorDecorationFromErr(o)}n=g.a.merge({},a);try{""!==this.data.jsonata&&(t=this.evalJsonata(e,n),this.data.results=t)}catch(o){this.data.results=o.message||String(o),this.jsonataEditor.addErrorDecorationFromErr(o)}this.editorOverwrite(this.resultsEditor,this.data.results)}else this.timer=setTimeout(this.eval.bind(this),750)}},{key:"clearMarkers",value:function(){this.jsonataEditor.clearDecorations(),this.jsonatabindingEditor.clearDecorations(),this.jsonEditor.clearDecorations()}},{key:"evalJsonata",value:function(e,t){var a=window.jsonataExtended(this.data.jsonata);a.assign("trace",(function(e){console.log(e)})),this.local||this.timeboxExpression(a,3e3,750);var n=a.evaluate(e,t);return n="undefined"===typeof n?"** no match **":JSON.stringify(n,(function(e,t){return"undefined"!==typeof t&&null!==t&&t.toPrecision?Number(t.toPrecision(13)):!t||!0!==t._jsonata_lambda&&!0!==t._jsonata_function?"function"===typeof t?"<native function>#"+t.length:t:"{function:"+(t.signature?t.signature.definition:"")+"}"}),2)}},{key:"timeboxExpression",value:function(e,t,a){var n=0,o=Date.now(),r=function(){if(n>a)throw{code:"U1001",message:"Stack overflow error: Check for non-terminating recursive function.  Consider rewriting as tail-recursive.",stack:(new Error).stack};if(Date.now()-o>t)throw{code:"U1002",message:"Expression evaluation timeout: Check for infinite loop",stack:(new Error).stack}};e.assign("__evaluate_entry",(function(){n++,r()})),e.assign("__evaluate_exit",(function(){n--,r()}))}},{key:"render",value:function(){var e={minimap:{enabled:!1},lineNumbers:"off",contextmenu:!1,automaticLayout:!0,scrollBeyondLastLine:!1,extraEditorClassName:"editor-pane"};return o.a.createElement(J.a,{fluid:!0},o.a.createElement(T,{sources:this.sources,onSourceSelect:this.changeData.bind(this),version:U.a}),o.a.createElement(W.a,null,o.a.createElement(B.a,null,o.a.createElement(F.a,{defaultActiveKey:"transform",transition:!1,id:"transform-config"},o.a.createElement(L.a,{eventKey:"transform",title:"Transform",className:"border"},o.a.createElement(C,{language:"jsonata",theme:"jsonataTheme",options:e,onChange:this.onChangeExpression.bind(this),editorDidMount:this.jsonataEditorDidMount.bind(this),label:"Transform",formatEnabled:!1})),o.a.createElement(L.a,{eventKey:"jsonatabinding",title:"JSONata Binding",className:"border"},o.a.createElement(C,{language:"json",theme:"jsonataTheme",options:e,onChange:this.onChangejsonatabinding.bind(this),editorDidMount:this.jsonatabindingEditorDidMount.bind(this),label:"JSONata Binding",moreinfo:"https://docs.jsonata.org/embedding-extending#expressionevaluateinput-bindings-callback",moreinfolabel:"More info on binding"}))))),o.a.createElement(W.a,null,o.a.createElement(B.a,null,o.a.createElement(F.a,{defaultActiveKey:"results",transition:!1,id:"transform-data"},o.a.createElement(L.a,{eventKey:"source",title:"Source Data",className:"border"},o.a.createElement(C,{language:"json",theme:"jsonataTheme",options:e,onChange:this.onChangeData.bind(this),editorDidMount:this.jsonEditorDidMount.bind(this),label:"Source Data"})),o.a.createElement(L.a,{eventKey:"results",title:"Results",className:"border"},o.a.createElement(C,{language:"json",theme:"jsonataTheme",options:{lineNumbers:"off",minimap:{enabled:!1},automaticLayout:!0,contextmenu:!1,scrollBeyondLastLine:!1,readOnly:!0,extraEditorClassName:"result-pane"},editorDidMount:this.resultsEditorDidMount.bind(this),label:"Results"}))))))}}]),a}(o.a.Component),x=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(R,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[262,1,2]]]);
//# sourceMappingURL=main.5de3fbb1.chunk.js.map