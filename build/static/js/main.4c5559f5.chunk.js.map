{"version":3,"sources":["data/sampledata.js","data/transforms.js","components/monacoIntegration/jsonata.monarch.js","components/monacoIntegration/functions/custom.js","components/monacoIntegration/functions/extended.js","components/monacoIntegration/jsonata.js","components/EditorNav.js","components/Notification.js","components/EnhancedEditorWithNav.js","components/images/docs-white-32.png","components/MainNav.js","components/images/github.png","ExerciserBootstrap.js","App.js","serviceWorker.js","index.js"],"names":["invoice","Account","Order","OrderID","Product","ProductID","SKU","Description","Colour","Width","Height","Depth","Weight","Price","Quantity","address","FirstName","Surname","Age","Address","Street","City","Postcode","Phone","type","number","Email","Other","Misc","schema","$schema","required","id","properties","Customer","AccID","items","Material","library","books","title","authors","isbn","price","copies","loans","customer","return","customers","name","street","city","postcode","empty","transforms","transform","description","jsondata","isActive","tokenizer","root","merged","getSuggestions","monaco","range","map","value","index","source","suggestion","label","kind","languages","CompletionItemKind","Function","insertText","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","documentation","parameters","length","params","forEach","defaultVal","defaultIsJSONata","default","optional","slice","returns","detail","signature","register","setMonarchTokensProvider","monarchDefinition","brackets","open","close","setLanguageConfiguration","autoClosingPairs","surroundingPairs","indentationRules","decreaseIndentPattern","increaseIndentPattern","insertSpaces","tabSize","editor","defineTheme","base","inherit","rules","token","foreground","registerCompletionItemProvider","provideCompletionItems","model","position","word","getWordUntilPosition","startLineNumber","lineNumber","endLineNumber","startColumn","endColumn","suggestions","registerHoverProvider","provideHover","getWordAtPosition","entry","reduce","acc","contents","EditorNav","props","onFormatClick","bind","onDownloadClick","onDownloadCSVClick","eventKey","event","this","formatEnabled","downloadEnabled","downloadCSVEnabled","formatlink","downloadlink","downloadCSVlink","formatLabel","formatTooltip","downloadLabel","downloadTooltip","downloadCSVLabel","downloadCSVTooltip","className","OverlayTrigger","placement","overlay","Tooltip","Nav","Link","onClick","Navbar","bg","variant","Text","Component","defaultProps","Notification","setAlertVisible","isVisible","setState","alertVisible","setMessage","message","autodismiss","delay","setTimeout","state","notification","Alert","onClose","dismissible","EnhancedEditorWithNav","monacoEditor","editorDidMount","_onFormatClick","_onDownloadClick","_onDownloadCSVClick","notificationElement","React","createRef","getModel","layout","decorations","deltaDecorations","start","end","buffer","getValue","resolve","offset","line","column","charAt","from","to","Range","options","inlineClassName","isWholeLine","linesDecorationsClassName","text","applyEdits","getLineCount","getLineMaxColumn","language","formatted","JSON","stringify","parse","updateNoUndo","filename","Delve","data","FileDownload","toLowerCase","lang","_","isArray","csv","PapaParse","unparse","quotes","quoteChar","escapeChar","delimiter","header","newline","isEmpty","current","error","err","pos","indexOf","parseInt","substr","addErrorDecoration","registerJsonataLanguage","setModelLanguage","addAction","keybindings","KeyCode","F11","run","ed","trigger","width","height","readOnly","other","ref","key","handleWidth","handleHeight","onResize","MainNav","onSelect","sourceItem","NavDropdown","Item","results","sources","push","createSourceItem","onSourceSelect","version","collapseOnSelect","expand","Brand","Toggle","aria-controls","Collapse","createSourceItems","href","target","src","docsextended","alt","docs","ExerciserBootstrap","dataexamples","sourceArray","newObj","jsonata","jsonatabinding","accumulator","currentValue","sourcearray","defaults","json","result","eval","editorOverwrite","jsonEditor","jsonataEditor","jsonatabindingEditor","resultsEditor","newValue","e","clearTimeout","timer","clearMarkers","eventkey","selected","sampledata","allEditorsOverwrite","input","jsonataResult","binding","window","jsonataExtended","addErrorDecorationFromErr","merge","evalJsonata","String","clearDecorations","expr","assign","arg","console","log","local","timeboxExpression","pathresult","evaluate","val","toPrecision","Number","_jsonata_lambda","_jsonata_function","definition","timeout","maxDepth","depth","time","Date","now","checkRunnaway","code","stack","Error","minimap","enabled","lineNumbers","contextmenu","automaticLayout","scrollBeyondLastLine","extraEditorClassName","Container","fluid","changeData","Row","Col","Tabs","defaultActiveKey","transition","Tab","theme","onChange","onChangeExpression","jsonataEditorDidMount","onChangejsonatabinding","jsonatabindingEditorDidMount","moreinfo","moreinfolabel","onChangeData","jsonEditorDidMount","resultsEditorDidMount","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"qXAAe,GACbA,QAAS,CACPC,QAAS,CACP,eAAgB,UAChBC,MAAO,CACL,CACEC,QAAS,WACTC,QAAS,CACP,CACE,eAAgB,aAChBC,UAAW,OACXC,IAAK,aACLC,YAAa,CACXC,OAAQ,SACRC,MAAO,IACPC,OAAQ,IACRC,MAAO,IACPC,OAAQ,KAEVC,MAAO,MACPC,SAAU,GAEZ,CACE,eAAgB,aAChBT,UAAW,OACXC,IAAK,aACLC,YAAa,CACXC,OAAQ,SACRC,MAAO,IACPC,OAAQ,IACRC,MAAO,IACPC,OAAQ,IAEVC,MAAO,MACPC,SAAU,KAIhB,CACEX,QAAS,WACTC,QAAS,CACP,CACE,eAAgB,aAChBC,UAAW,OACXC,IAAK,YACLC,YAAa,CACXC,OAAQ,SACRC,MAAO,IACPC,OAAQ,IACRC,MAAO,IACPC,OAAQ,KAEVC,MAAO,MACPC,SAAU,GAEZ,CACET,UAAW,OACXC,IAAK,aACL,eAAgB,QAChBC,YAAa,CACXC,OAAQ,QACRC,MAAO,GACPC,OAAQ,GACRC,MAAO,IACPC,OAAQ,GAEVC,MAAO,OACPC,SAAU,QAOtBC,QAAS,CACPC,UAAW,OACXC,QAAS,QACTC,IAAK,GACLC,QAAS,CACPC,OAAQ,eACRC,KAAM,aACNC,SAAU,YAEZC,MAAO,CACL,CACEC,KAAM,OACNC,OAAQ,iBAEV,CACED,KAAM,SACNC,OAAQ,gBAEV,CACED,KAAM,SACNC,OAAQ,gBAEV,CACED,KAAM,SACNC,OAAQ,kBAGZC,MAAO,CACL,CACEF,KAAM,SACNT,QAAS,CAAC,yBAA0B,uBAEtC,CACES,KAAM,OACNT,QAAS,CAAC,uBAAwB,qCAGtCY,MAAO,CACL,aAAa,EACbC,KAAM,KACN,sBAAuB,CACrBR,OAAQ,aACRC,KAAM,SACNC,SAAU,YAIhBO,OAAQ,CACNC,QAAS,0CACTC,SAAU,CAAC,WACXP,KAAM,SACNQ,GAAI,2BACJC,WAAY,CACVhC,QAAS,CACP8B,SAAU,CAAC,SACXP,KAAM,SACNS,WAAY,CACVC,SAAU,CACRH,SAAU,CAAC,aAAc,WACzBP,KAAM,SACNS,WAAY,CACV,aAAc,CACZT,KAAM,UAERP,QAAS,CACPO,KAAM,YAIZW,MAAO,CACLX,KAAM,UAERtB,MAAO,CACLkC,MAAO,CACLL,SAAU,CAAC,UAAW,WACtBP,KAAM,SACNS,WAAY,CACV9B,QAAS,CACPqB,KAAM,UAERpB,QAAS,CACPgC,MAAO,CACLL,SAAU,CAAC,YAAa,eAAgB,QAAS,YACjDP,KAAM,SACNS,WAAY,CACV3B,IAAK,CACHkB,KAAM,UAERjB,YAAa,CACXiB,KAAM,SACNS,WAAY,CACVxB,MAAO,CACLe,KAAM,WAERb,MAAO,CACLa,KAAM,WAERZ,OAAQ,CACNY,KAAM,UAERhB,OAAQ,CACNgB,KAAM,UAERa,SAAU,CACRb,KAAM,UAERd,OAAQ,CACNc,KAAM,aAIZ,eAAgB,CACdA,KAAM,UAERX,MAAO,CACLW,KAAM,UAERV,SAAU,CACRU,KAAM,WAERnB,UAAW,CACTmB,KAAM,aAIZA,KAAM,WAIZA,KAAM,SAER,eAAgB,CACdA,KAAM,UAERL,QAAS,CACPY,SAAU,CAAC,iBAAkB,OAAQ,YACrCP,KAAM,SACNS,WAAY,CACV,iBAAkB,CAChBT,KAAM,UAER,iBAAkB,CAChBA,KAAM,UAERF,SAAU,CACRE,KAAM,UAERH,KAAM,CACJG,KAAM,gBAQpBc,QAAS,CACPA,QAAS,CACPC,MAAO,CACL,CACEC,MAAO,oDACPC,QAAS,CAAC,UAAW,WACrBC,KAAM,gBACNC,MAAO,KACPC,OAAQ,GAEV,CACEJ,MAAO,6BACPC,QAAS,CAAC,YAAa,UACvBC,KAAM,gBACNC,MAAO,MACPC,OAAQ,GAEV,CACEJ,MAAO,+BACPC,QAAS,CAAC,MAAO,YAAa,cAC9BC,KAAM,gBACNE,OAAQ,GAEV,CACEJ,MAAO,+CACPC,QAAS,CAAC,MAAO,MAAO,QAAS,UACjCC,KAAM,gBACNC,MAAO,MACPC,OAAQ,IAGZC,MAAO,CACL,CACEC,SAAU,QACVJ,KAAM,gBACNK,OAAQ,cAEV,CACED,SAAU,QACVJ,KAAM,gBACNK,OAAQ,cAEV,CACED,SAAU,QACVJ,KAAM,gBACNK,OAAQ,eAGZC,UAAW,CACT,CACEhB,GAAI,QACJiB,KAAM,UACNlC,QAAS,CACPmC,OAAQ,cACRC,KAAM,aACNC,SAAU,aAGd,CACEpB,GAAI,QACJiB,KAAM,cACNlC,QAAS,CACPmC,OAAQ,mBACRC,KAAM,aACNC,SAAU,aAGd,CACEpB,GAAI,QACJiB,KAAM,eACNlC,QAAS,CACPmC,OAAQ,gBACRC,KAAM,cACNC,SAAU,gBAMpBC,MAAO,ICrTM,GACbC,WAAY,CACV,CACEtB,GAAI,uCACJiB,KAAM,UACNM,UAAW,iDACXC,YAAa,gCACbC,SAAU,UACVC,UAAU,GAEZ,CACE1B,GAAI,uCACJiB,KAAM,UACNM,UACE,wFACFC,YAAa,gCACbC,SAAU,UACVC,UAAU,GAEZ,CACE1B,GAAI,uCACJiB,KAAM,SACNM,UAAW,2BACXC,YAAa,+BACbC,SAAU,SACVC,UAAU,GAEZ,CACE1B,GAAI,uCACJiB,KAAM,UACNM,UACE,kJACFC,YAAa,gCACbC,SAAU,UACVC,UAAU,K,2GClCD,GACbC,UAAW,CACTC,KAAM,CACJ,CAAC,aAAc,mBACf,CAAC,OAAQ,kBACT,CAAC,OAAQ,kBACT,CAAC,kBAAmB,oBACpB,CAAC,gBAAiB,oB,QCLlBC,EAAM,YCFG,IDUR,SAASC,EAAeC,EAAQC,GA0ErC,OAzEoBH,EAAOI,KAAI,SAACC,EAAOC,EAAOC,GAC5C,IAAMC,EAAa,GAQnB,GAPAA,EAAWC,MAAX,WAAuBJ,EAAMI,OAC7BD,EAAWE,KAAOR,EAAOS,UAAUC,mBAAmBC,SACtDL,EAAWM,WAAa,GACxBN,EAAWO,gBAAkBb,EAAOS,UAAUK,6BAA6BC,gBAC3ET,EAAWU,cAAgB,GAC3BV,EAAWU,cAAcb,MAAQA,EAAMV,YAEnCU,EAAMc,WAAY,CACpB,IAAID,EAAgBV,EAAWU,cAAcb,MAG7C,GAFAa,GAAiB,OACjBA,GAAiB,qBACbb,EAAMc,YAA0C,IAA5Bd,EAAMc,WAAWC,OAAc,CACrD,IAAIC,EAAS,GACbhB,EAAMc,WAAWG,SAAQ,SAACjB,EAAOC,EAAOC,GACtC,IAAMgB,EAAalB,EAAMmB,iBAAmB,KAAOnB,EAAMoB,QAAUpB,EAAMoB,QACzEJ,GAAM,WAAQhB,EAAM1C,KAAd,aACJ0C,EAAMqB,SAAN,UACOrB,EAAMoB,QAAN,WAAoBpB,EAAMI,MAA1B,YAAmCc,EAAnC,gBAAuDlB,EAAMI,MAA7D,MADP,UAEOJ,EAAMoB,QAAN,UAAmBpB,EAAMI,MAAzB,YAAkCc,GAAlC,UAAoDlB,EAAMI,SAEnEY,GAAUhB,EAAMqB,SAAW,kBAAoB,OAC/CL,GAAM,UAAOhB,EAAMa,cAAb,WAERA,GAAiBG,EAAOM,MAAM,GAAI,GAEpCnB,EAAWU,cAAcb,MAAQa,EAGnC,GAAIb,EAAMuB,QAAS,CACjB,IAAIV,EAAgBV,EAAWU,cAAcb,MAC7Ca,GAAiB,OACjBA,GAAiB,kBACjBA,GAAa,WAAQb,EAAMuB,QAAd,SACbpB,EAAWU,cAAcb,MAAQa,EAInC,GADAV,EAAWqB,OAASxB,EAAMyB,UACtBzB,EAAMc,WAAY,CACpB,IAAIW,EAAYtB,EAAWC,MAE3B,GADAqB,GAAa,IACTzB,EAAMc,YAA0C,IAA5Bd,EAAMc,WAAWC,OAAc,CACrD,IAAIC,EAAS,GACbhB,EAAMc,WAAWG,SAAQ,SAACjB,EAAOC,EAAOC,GACtCc,GAAM,UAAOhB,EAAMI,MAAb,QAERqB,GAAaT,EAAOM,MAAM,GAAI,GAEhCG,GAAa,IACbtB,EAAWqB,OAASC,EAItB,GADAtB,EAAWM,WAAaT,EAAMI,MAC1BJ,EAAMc,WAAY,CACpB,IAAIL,EAAaN,EAAWM,WAE5B,GADAA,GAAc,IACVT,EAAMc,YAA0C,IAA5Bd,EAAMc,WAAWC,OAAc,CACrD,IAAIC,EAAS,GACbhB,EAAMc,WAAWG,SAAQ,SAACjB,EAAOC,EAAOC,GACtC,IAAMgB,EAAalB,EAAMmB,iBAAmB,KAAOnB,EAAMoB,QAAUpB,EAAMoB,QACzEJ,GAAM,YAAUf,EAAQ,EAAlB,YAAuBD,EAAMoB,QAAUF,EAAalB,EAAMI,MAA1D,UAERK,GAAcO,EAAOM,MAAM,GAAI,GAEjCb,GAAc,IACdN,EAAWM,WAAaA,EAI1B,OADAN,EAAWL,MAAQA,EACZK,KE7EI,eAAUN,GACvBA,EAAOS,UAAUoB,SAAS,CACxB5D,GAAI,YAEN+B,EAAOS,UAAUqB,yBAAyB,UAAWC,GAErD,IAAMC,EAAW,CACf,CAAEC,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,MAEtBlC,EAAOS,UAAU0B,yBAAyB,UAAW,CACnDH,SAAU,CACR,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAERI,iBAAkBJ,EAClBK,iBAAkBL,EAClBM,iBAAkB,CAEhBC,sBAAuB,oCAEvBC,sBAAuB,qDAEzBC,cAAc,EACdC,QAAS,IAIX1C,EAAO2C,OAAOC,YAAY,eAAgB,CACxCC,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CAAEC,MAAO,iBAAkBC,WAAY,UACvC,CAAED,MAAO,kBAAmBC,WAAY,UACxC,CAAED,MAAO,mBAAoBC,WAAY,UACzC,CAAED,MAAO,gBAAiBC,WAAY,aAK1CjD,EAAOS,UAAUyC,+BAA+B,UAAW,CACzDC,uBAAwB,SAACC,EAAOC,GAC9B,IAAIC,EAAOF,EAAMG,qBAAqBF,GAClCpD,EAAQ,CACVuD,gBAAiBH,EAASI,WAC1BC,cAAeL,EAASI,WACxBE,YAAaL,EAAKK,YAClBC,UAAWN,EAAKM,WAElB,MAAO,CACLC,YAAa9D,EAAeC,EAAQC,OAK1CD,EAAOS,UAAUqD,sBAAsB,UAAW,CAChDC,aAAc,SAACX,EAAOC,GACpB,IAAIC,EAAOF,EAAMY,kBAAkBX,GACnC,GAAIC,EAAM,CACR,IAAIrD,EAAQ,CACVuD,gBAAiBH,EAASI,WAC1BC,cAAeL,EAASI,WACxBE,YAAaL,EAAKK,YAClBC,UAAWN,EAAKM,WAEZK,EFmBGnE,EAAOoE,QAAO,SAACC,EAAKhE,EAAOC,EAAOC,GAC/C,IAAIW,EAAgBb,EAAMV,YAC1B,GAAIU,EAAMc,aACRD,GAAiB,OACjBA,GAAiB,qBACbb,EAAMc,YAA0C,IAA5Bd,EAAMc,WAAWC,QAAc,CACrD,IAAIC,EAAS,GACbhB,EAAMc,WAAWG,SAAQ,SAACjB,EAAOC,EAAOC,GACtC,IAAMgB,EAAalB,EAAMmB,iBAAmB,KAAOnB,EAAMoB,QAAUpB,EAAMoB,QACzEJ,GAAM,WAAQhB,EAAM1C,KAAd,aACJ0C,EAAMqB,SAAN,UACOrB,EAAMoB,QAAN,WAAoBpB,EAAMI,MAA1B,YAAmCc,EAAnC,gBAAuDlB,EAAMI,MAA7D,MADP,UAEOJ,EAAMoB,QAAN,UAAmBpB,EAAMI,MAAzB,YAAkCc,GAAlC,UAAoDlB,EAAMI,SAEnEY,GAAUhB,EAAMqB,SAAW,kBAAoB,OAC/CL,GAAM,UAAOhB,EAAMa,cAAb,WAERA,GAAiBG,EAAOM,MAAM,GAAI,GAIlCtB,EAAMuB,UACRV,GAAiB,OACjBA,GAAiB,kBACjBA,GAAa,WAAQb,EAAMuB,QAAd,UAGf,IAAIC,EAAM,WAAOxB,EAAMI,MAAb,MACV,GAAIJ,EAAMc,WAAY,CACpB,IAAIW,EAAS,WAAOzB,EAAMI,OAE1B,GADAqB,GAAa,IACTzB,EAAMc,YAA0C,IAA5Bd,EAAMc,WAAWC,OAAc,CACrD,IAAIC,EAAS,GACbhB,EAAMc,WAAWG,SAAQ,SAACjB,EAAOC,EAAOC,GACtCc,GAAM,UAAOhB,EAAMI,MAAb,QAERqB,GAAaT,EAAOM,MAAM,GAAI,GAGhCE,EADAC,GAAa,IAIf,OADAuC,EAAIhE,EAAMI,OAAS,CAAC,CAAEJ,MAAM,KAAD,OAAOwB,EAAP,OAAqB,CAAExB,MAAOa,IAClDmD,IACN,IE9D6Bb,EAAKA,MAC/B,GAAIW,EACF,MAAO,CACLhE,QACAmE,SAAUH,GAIhB,OAAO,S,oCC3EQI,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,cAAgB,EAAKA,cAAcC,KAAnB,gBACrB,EAAKC,gBAAkB,EAAKA,gBAAgBD,KAArB,gBACvB,EAAKE,mBAAqB,EAAKA,mBAAmBF,KAAxB,gBAJT,E,0DAOLG,EAAUC,GAClBC,KAAKP,MAAMQ,eAAiBD,KAAKP,MAAMC,eACzCM,KAAKP,MAAMC,cAAcI,EAAUC,K,sCAIvBD,EAAUC,GACpBC,KAAKP,MAAMS,iBAAmBF,KAAKP,MAAMG,iBAC3CI,KAAKP,MAAMG,gBAAgBE,EAAUC,K,yCAItBD,EAAUC,GACvBC,KAAKP,MAAMU,oBAAsBH,KAAKP,MAAMI,oBAC9CG,KAAKP,MAAMI,mBAAmBC,EAAUC,K,+BAIlC,IAeJK,EAcAC,EAcAC,EA3CG,EAaHN,KAAKP,MAXP/D,EAFK,EAELA,MACAuE,EAHK,EAGLA,cACAM,EAJK,EAILA,YACAC,EALK,EAKLA,cACAN,EANK,EAMLA,gBACAO,EAPK,EAOLA,cACAC,EARK,EAQLA,gBACAP,EATK,EASLA,mBACAQ,EAVK,EAULA,iBACAC,EAXK,EAWLA,mBACAC,EAZK,EAYLA,UA6CF,OAzCIZ,IACFG,EACE,kBAACU,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,kBAAqBoH,IAEzC,kBAACU,EAAA,EAAD,KACE,kBAACA,EAAA,EAAIC,KAAL,CAAUC,QAASpB,KAAKN,eAAgBa,MAO5CL,IACFG,EACE,kBAACS,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,oBAAuBsH,IAE3C,kBAACQ,EAAA,EAAD,KACE,kBAACA,EAAA,EAAIC,KAAL,CAAUC,QAASpB,KAAKJ,iBAAkBa,MAO9CN,IACFG,EACE,kBAACQ,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,uBAA0BwH,IAE9C,kBAACM,EAAA,EAAD,KACE,kBAACA,EAAA,EAAIC,KAAL,CAAUC,QAASpB,KAAKH,oBAAqBc,MAOnD,yBAAKE,UAAWA,GACd,kBAACQ,EAAA,EAAD,CAAQR,UAAU,YAAYS,GAAG,QAAQC,QAAQ,SAC/C,kBAACL,EAAA,EAAD,CAAKL,UAAU,WACb,kBAACQ,EAAA,EAAOG,KAAR,CAAaX,UAAU,IAAI,gCAASnF,KAErC0E,EACAC,EACAC,Q,GA3F4BmB,aAmHvCjC,EAAUkC,aAAe,CACvBhG,MAAO,SACPuE,eAAe,EACfM,YAAa,SACbC,cAAe,6BACfd,cAAe,aACfQ,iBAAiB,EACjBO,cAAe,WACfC,gBAAiB,+BACjBd,gBAAiB,aACjBO,oBAAoB,EACpBQ,iBAAkB,eAClBC,mBAAoB,8CACpBf,mBAAoB,aACpBgB,UAAW,c,aCpIQc,E,kDACnB,WAAYlC,GAAQ,IAAD,8BACjB,cAAMA,IAQRmC,gBAAkB,SAACC,GACjB,EAAKC,SAAS,CACZC,aAAcF,KAXC,EAenBG,WAAa,SAACC,EAASV,GACrB,EAAKO,SAAS,CACZG,QAASA,GAAoB,KAC7BF,eAAcE,EACdV,QAASA,GAAoB,EAAK9B,MAAM8B,UAEtC,EAAK9B,MAAMyC,aAAe,EAAKzC,MAAM0C,OAAS,EAAK1C,MAAM0C,MAAQ,GACnEC,YAAW,WACT,EAAKR,iBAAgB,KACpB,EAAKnC,MAAM0C,QAtBhB,EAAKE,MAAQ,CACXJ,QAAS,KACTF,cAAc,EACdR,QAAS,EAAK9B,MAAM8B,SALL,E,qDA4BT,IACJe,EADG,OAeP,OAbItC,KAAKqC,MAAMN,eACbO,EACE,kBAACC,EAAA,EAAD,CACEhB,QAASvB,KAAKqC,MAAMd,QACpBiB,QAAS,kBAAM,EAAKZ,iBAAgB,IACpCf,UAAU,OACV4B,aAAW,GAEVzC,KAAKqC,MAAMJ,UAKX,6BAAMK,O,GA5CyBb,aAsD1CE,EAAaD,aAAe,CAC1BQ,aAAa,EACbC,MAAO,IACPZ,QAAS,W,IC5CUmB,E,kDACnB,WAAYjD,GAAQ,IAAD,8BACjB,cAAMA,IACDkD,aAAe,KACpB,EAAKxH,OAAS,KACd,EAAKyH,eAAiB,EAAKA,eAAejD,KAApB,gBACtB,EAAKkD,eAAiB,EAAKA,eAAelD,KAApB,gBACtB,EAAKmD,iBAAmB,EAAKA,iBAAiBnD,KAAtB,gBACxB,EAAKoD,oBAAsB,EAAKA,oBAAoBpD,KAAzB,gBAC3B,EAAKqD,oBAAsBC,IAAMC,YARhB,E,uDAYjB,GAAyB,MAArBlD,KAAK2C,aACP,OAAO3C,KAAK2C,aAAaQ,a,+BASF,MAArBnD,KAAK2C,cACP3C,KAAK2C,aAAaS,W,yCASK,MAArBpD,KAAK2C,eACP3C,KAAK2C,aAAaU,YAAcrD,KAAK2C,aAAaW,iBAChDtD,KAAK2C,aAAaU,YAClB,O,yCAWaE,EAAOC,GACxB,GAAyB,MAArBxD,KAAK2C,aAAsB,CAC7B,IAAMc,EAASzD,KAAK2C,aAAaQ,WAAWO,WACtCC,EAAU,SAACC,GAIf,IAHA,IAAIC,EAAO,EACPC,EAAS,EACTtF,EAAW,EACRA,EAAWoF,GACgB,OAA5BH,EAAOM,OAAOvF,IAChBqF,IACAC,EAAS,GAETA,IAEFtF,IAEF,MAAO,CAAEqF,OAAMC,WAEXE,EAAOL,EAAQJ,GACfU,EAAKN,EAAQH,GACnBxD,KAAK2C,aAAaU,YAAcrD,KAAK2C,aAAaW,iBAChDtD,KAAK2C,aAAaU,YAClB,CACE,CACEjI,MAAO,IAAI4E,KAAK7E,OAAO+I,MAAMF,EAAKH,KAAMG,EAAKF,OAAQG,EAAGJ,KAAMI,EAAGH,QACjEK,QAAS,CAAEC,gBAAiB,uBAE9B,CACEhJ,MAAO,IAAI4E,KAAK7E,OAAO+I,MAAMF,EAAKH,KAAM,EAAGI,EAAGJ,KAAM,GACpDM,QAAS,CACPE,aAAa,EACbC,0BAA2B,4B,mCAQ1BC,GACX,IAAMhG,EAAQyB,KAAKmD,WACnB5E,EAAMiG,WAAW,CACf,CACEpJ,MAAO,IAAI4E,KAAK7E,OAAO+I,MACrB,EACA,EACA3F,EAAMkG,eACNlG,EAAMmG,iBAAiBnG,EAAMkG,iBAE/BF,Y,qCAKSzE,EAAUC,GACvB,GAAIC,KAAKP,MAAMQ,eAAyC,SAAxBD,KAAKP,MAAMkF,SAAqB,CAC9D,IAAMpG,EAAQyB,KAAKmD,WACbyB,EAAYC,KAAKC,UAAUD,KAAKE,MAAMxG,EAAMmF,YAAa,KAAM,GACrE1D,KAAKgF,aAAaJ,M,uCAIL9E,EAAUC,GACzB,GAAIC,KAAKP,MAAMS,gBAAiB,CAC9B,IAAM+E,EAAQ,UAAMC,IAAMlF,KAAM,cAAe,YAAjC,YAAgDkF,IAC5DlF,KACA,iBACA,SAGImF,EADQnF,KAAKmD,WACAO,WACnB0B,IAAaD,EAAMF,EAASI,cAAe,iB,0CAI3BvF,EAAUC,GAC5B,GAAIC,KAAKP,MAAMU,mBAAoB,CACjC,IAAMmF,EAAOJ,IAAMlF,KAAM,iBAAkB,MACrCiF,EAAQ,UAAMC,IAAMlF,KAAM,cAAe,YAAjC,QAEd,GAA2B,SAAvBsF,EAAKD,cAA0B,CACjC,IAUMd,EADQvE,KAAKmD,WACAO,WACfyB,EAAON,KAAKE,MAAMR,GACjBgB,IAAEC,QAAQL,KACbA,EAAO,CAACA,IAEV,IACE,IAAMM,EAAMC,IAAUC,QAAQR,EAhBR,CACtBS,QAAQ,EACRC,UAAW,IACXC,WAAY,IACZC,UAAW,IACXC,QAAQ,EACRC,QAAS,SAWJV,IAAEW,QAAQT,GAGbzF,KAAKgD,oBAAoBmD,QAAQnE,WAC/B,6CAHFoD,IAAaK,EAAKR,EAASI,cAAe,YAM5C,MAAOe,GACPpG,KAAKgD,oBAAoBmD,QAAQnE,WAAjC,4DACuDoE,EAAMnE,SAC3D,e,gDAagBoE,GACxB,IAAI9C,EAAQ,EACRC,EAAM,EAEV,GAA4B,SAAxBxD,KAAKP,MAAMkF,SAAqB,CAClC,IAAM2B,EAAMD,EAAIpE,QAAQsE,QAAQ,iBACnB,IAATD,IAEF9C,GADAD,EAAQiD,SAASH,EAAIpE,QAAQwE,OAAOH,EAAM,KAAO,GACnC,GAIU,YAAxBtG,KAAKP,MAAMkF,WAEbpB,GADAC,EAAM6C,EAAI7H,SAAW,IACN6H,EAAIlI,MAAQkI,EAAIlI,MAAM9B,OAAS,IAGvB,MAArB2D,KAAK2C,cAAwBY,IAAUC,GACzCxD,KAAK0G,mBAAmBnD,EAAOC,K,6CASjCxD,KAAK2C,aAAe,KACpB3C,KAAK7E,OAAS,O,qCAOD2C,EAAQ3C,GACrB2C,EAAOuF,YAAc,GACO,YAAxBrD,KAAKP,MAAMkF,WACbgC,EAAwBxL,GACxBA,EAAO2C,OAAO8I,iBAAiB9I,EAAOqF,WAAY,WAClDrF,EAAO+I,UAAU,CACfzN,GAAI,iBACJsC,MAAO,SACPoL,YAAa,CAAC3L,EAAO4L,QAAQC,KAC7BC,IAAK,SAAUC,GAEb,OADAA,EAAGC,QAAQ,WAAY,OAAQ,CAAE5C,KAAM,WAChC,SAIbvE,KAAK2C,aAAe7E,EACpBkC,KAAK7E,OAASA,EAGV6E,KAAKP,MAAMmD,gBACb5C,KAAKP,MAAMmD,eAAe5C,KAAM7E,K,+BAI1B,IAAD,SAcH6E,KAAKP,MAZP2H,EAFK,EAELA,MACAC,EAHK,EAGLA,OAEA/L,GALK,EAILgM,SAJK,EAKLhM,OACA2E,EANK,EAMLA,cACAC,EAPK,EAOLA,gBACAC,EARK,EAQLA,mBACAzE,EATK,EASLA,MATK,IAULyI,eAVK,MAUK,GAVL,EAYLtD,GAZK,EAWL+B,eAXK,EAYL/B,WACG0G,EAbE,2JAgBP,OACE,yBAAK1G,UAAWA,GACd,kBAAC,EAAD,CAAc2G,IAAKxH,KAAKgD,oBAAqBd,aAAa,EAAMC,MAAO,MACvE,kBAAC,EAAD,CACEsF,IAAG,cAAS/L,GACZA,MAAOA,EACPuE,cAAeA,EACfC,gBAAiBA,EACjBC,mBAAoBA,EACpBT,cAAeM,KAAK6C,eACpBjD,gBAAiBI,KAAK8C,iBACtBjD,mBAAoBG,KAAK+C,sBAE3B,kBAAC,IAAD,CACE2E,aAAW,EACXC,cAAY,EACZC,SAAU,WACR,EAAKxE,WAGP,kBAAC,IAAD,eACEqE,IAAG,iBAAY/L,GACf0L,MAAOA,GAAS,OAChBC,OAAQA,GAAU,OAClB/L,MAAOA,EACP6I,QAAO,eACFA,IAEDoD,EARN,CASE3E,eAAgB5C,KAAK4C,wB,GAhRkBnB,aAqSnDiB,EAAsBhB,aAAe,CACnCb,UAAW,kBACXZ,eAAe,EACfC,iBAAiB,EACjBC,oBAAoB,EACpBzE,MAAO,U,aC3TM,25CCYMmM,E,kDACnB,WAAYpI,GAAQ,IAAD,8BACjB,cAAMA,IACDqI,SAAW,EAAKA,SAASnI,KAAd,gBAFC,E,6DAKFoI,GACf,OACE,kBAACC,EAAA,EAAYC,KAAb,CAAkBR,IAAKM,EAAW3O,GAAI0G,SAAUiI,EAAW3O,IACxD2O,EAAW1N,Q,0CAKG,IAAD,OACZ6N,EAAU,GAIhB,OAHA3C,IAAEhJ,QAAQyD,KAAKP,MAAM0I,SAAS,SAAC7M,EAAOmM,GACpCS,EAAQE,KAAK,EAAKC,iBAAiB/M,OAGnC,kBAAC0M,EAAA,EAAD,CAAapO,MAAM,mBAAmBR,GAAG,iBAAiB0O,SAAU9H,KAAK8H,UACtEI,K,+BAKEpI,EAAUC,GACbC,KAAKP,MAAM6I,gBACbtI,KAAKP,MAAM6I,eAAexI,EAAUC,K,+BAI9B,IACAwI,EAAYvI,KAAKP,MAAjB8I,QAER,OACE,kBAAClH,EAAA,EAAD,CAAQmH,kBAAgB,EAACC,OAAO,KAAKnH,GAAG,OAAOC,QAAQ,QACrD,kBAACF,EAAA,EAAOqH,MAAR,oCAAyD,IACzD,kBAACrH,EAAA,EAAOsH,OAAR,CAAeC,gBAAc,0BAC7B,kBAACvH,EAAA,EAAOwH,SAAR,CAAiBzP,GAAG,yBAClB,kBAAC8H,EAAA,EAAD,CAAKL,UAAU,WAAWb,KAAK8I,qBAC/B,kBAAC5H,EAAA,EAAD,KACE,kBAACA,EAAA,EAAI+G,KAAL,KACE,kBAACnH,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,kBAAX,oCAET,kBAAC8H,EAAA,EAAIC,KAAL,CACErB,SAAS,kBACTiJ,KAAK,iEACLC,OAAO,UAEP,yBAAKC,IAAKC,EAAcC,IAAI,sCAIlC,kBAACjI,EAAA,EAAI+G,KAAL,KACE,kBAACnH,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,kBAAX,+BAET,kBAAC8H,EAAA,EAAIC,KAAL,CACErB,SAAS,cACTiJ,KAAK,oCACLC,OAAO,UAEP,yBAAKC,IAAKG,EAAMD,IAAI,kCAI1B,kBAACjI,EAAA,EAAI+G,KAAL,KACE,kBAACnH,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,kBAAX,WAET,kBAAC8H,EAAA,EAAIC,KAAL,CACErB,SAAS,SACTiJ,KAAK,uEACLC,OAAO,UAEP,yBAAKC,IC5FR,ykED4FqBE,IAAI,cAI5B,kBAACjI,EAAA,EAAI+G,KAAL,KACE,kBAACnH,EAAA,EAAD,CACEC,UAAU,SACVC,QAAS,kBAACC,EAAA,EAAD,CAAS7H,GAAE,kBAAX,mBAET,kBAAC8H,EAAA,EAAIC,KAAL,CACErB,SAAS,YACTiJ,KAAK,gGACLC,OAAO,UAEP,kBAAC3H,EAAA,EAAOG,KAAR,CAAaX,UAAU,cAAvB,YAA0C0H,c,GA9FvB9G,aA+GrCoG,EAAQnG,aAAe,CACrB4G,eAAgB,aAChBH,QAAS,GACTI,QAAS,I,mEEsNIc,E,kDA7Tb,WAAY5J,GAAQ,IAAD,sBACjB,cAAMA,GAGN,IAAM6J,EAAe5O,EAJJ,OAOjB,EAAKyN,QAAUmB,EAAa5O,WACzBW,KAAI,SAACC,EAAOC,EAAOgO,GAClB,IAAMC,EAAS,GAMf,OALAA,EAAOpQ,GAAKkC,EAAMlC,GAClBoQ,EAAOnP,KAAP,UAAiBiB,EAAMjB,MACvBmP,EAAO5Q,KAAO0C,EAAMT,SACpB2O,EAAOC,QAAP,UAAoBnO,EAAMX,WAC1B6O,EAAOE,eAAiB,GACjBF,KAERnK,QAAO,SAACsK,EAAaC,EAAcrO,EAAOsO,GAEzC,OADAF,EAAYC,EAAaxQ,IAAMwQ,EACxBD,IACN,IAEL,EAAKG,SAAW,CACdrP,MAAO,CACLrB,GAAI,QACJiB,KAAM,QACNzB,KAAM,QACN6Q,QAAQ,OACRC,eAAgB,KAIpB,EAAKvB,QAAL,2BACK,EAAK2B,UACL,EAAK3B,SAGV,EAAKhD,KAAO,CACV4E,KAAMlF,KAAKC,UAAU,GAAI,KAAM,GAC/B2E,QAAQ,OACRC,eAAgB7E,KAAKC,UAAU,GAAI,KAAM,GACzCkF,OAAQ,MAzCO,E,gEA8CjBhK,KAAKiK,S,sCAGSnM,EAAQxC,GAClBwC,GACFA,EAAOkH,aAAa1J,K,4CAKtB0E,KAAKkK,gBAAgBlK,KAAKmK,WAAYnK,KAAKmF,KAAK4E,MAChD/J,KAAKkK,gBAAgBlK,KAAKoK,cAAepK,KAAKmF,KAAKsE,SACnDzJ,KAAKkK,gBAAgBlK,KAAKqK,qBAAsBrK,KAAKmF,KAAKuE,gBAC1D1J,KAAKkK,gBAAgBlK,KAAKsK,cAAetK,KAAKmF,KAAK+C,W,yCAGlCpK,EAAQ3C,GACzB6E,KAAKmK,WAAarM,EAClBkC,KAAKkK,gBAAgBlK,KAAKmK,WAAYnK,KAAKmF,KAAK4E,Q,4CAG5BjM,EAAQ3C,GAC5B6E,KAAKoK,cAAgBtM,EACrBkC,KAAKkK,gBAAgBlK,KAAKoK,cAAepK,KAAKmF,KAAKsE,W,mDAGxB3L,EAAQ3C,GACnC6E,KAAKqK,qBAAuBvM,EAC5BkC,KAAKkK,gBAAgBlK,KAAKqK,qBAAsBrK,KAAKmF,KAAKuE,kB,4CAGtC5L,EAAQ3C,GAC5B6E,KAAKsK,cAAgBxM,EACrBkC,KAAKkK,gBAAgBlK,KAAKsK,cAAetK,KAAKmF,KAAK6E,U,mCAGxCO,EAAUC,GACrBxK,KAAKmF,KAAK4E,KAAOQ,EACjBE,aAAazK,KAAK0K,OAClB1K,KAAK0K,MAAQtI,WAAWpC,KAAKiK,KAAKtK,KAAKK,MAAO,KAC9CA,KAAK2K,iB,yCAGYJ,EAAUC,GAC3BxK,KAAKmF,KAAKsE,QAAUc,EACpBE,aAAazK,KAAK0K,OAClB1K,KAAK0K,MAAQtI,WAAWpC,KAAKiK,KAAKtK,KAAKK,MAAO,KAC9CA,KAAK2K,iB,6CAGgBJ,EAAUC,GAC/BxK,KAAKmF,KAAKuE,eAAiBa,EAC3BE,aAAazK,KAAK0K,OAClB1K,KAAK0K,MAAQtI,WAAWpC,KAAKiK,KAAKtK,KAAKK,MAAO,KAC9CA,KAAK2K,iB,iCAGIC,EAAU7K,GACnB,IAAM8K,EAAW7K,KAAKmI,QAAQyC,GAC9B5K,KAAKmF,KAAO,CACV4E,KAAMlF,KAAKC,UAAUgG,EAAWD,EAASjS,MAAO,KAAM,GACtD6Q,QAASoB,EAASpB,QAClBC,eAAgB7E,KAAKC,UAAU+F,EAASnB,gBAAkB,GAAI,KAAM,IAEtE1J,KAAK+K,sBACLN,aAAazK,KAAK0K,OAClB1K,KAAK0K,MAAQtI,WAAWpC,KAAKiK,KAAKtK,KAAKK,MAAO,KAC9CA,KAAK2K,iB,6BAIL,IAAIK,EAAOC,EAAevB,EAAgBwB,EAE1C,GAAsC,qBAA3BC,OAAOC,gBAAlB,CAKA,IACEJ,EAAQnG,KAAKE,MAAM/E,KAAKmF,KAAK4E,MAC7B,MAAO1D,GAGP,OAFArG,KAAKmF,KAAK+C,QAAV,oCAAiD7B,EAAIpE,cACrDjC,KAAKmK,WAAWkB,0BAA0BhF,GAI5C,IACEqD,EAAiB7E,KAAKE,MAAM/E,KAAKmF,KAAKuE,gBACtC,MAAOrD,GAGP,OAFArG,KAAKmF,KAAK+C,QAAV,iDAA8D7B,EAAIpE,cAClEjC,KAAKqK,qBAAqBgB,0BAA0BhF,GAItD6E,EAAU3F,IAAE+F,MAAM,GAAI5B,GAGtB,IAC4B,KAAtB1J,KAAKmF,KAAKsE,UACZwB,EAAgBjL,KAAKuL,YAAYP,EAAOE,GACxClL,KAAKmF,KAAK+C,QAAU+C,GAEtB,MAAO5E,GACPrG,KAAKmF,KAAK+C,QAAU7B,EAAIpE,SAAWuJ,OAAOnF,GAC1CrG,KAAKoK,cAAciB,0BAA0BhF,GAE/CrG,KAAKkK,gBAAgBlK,KAAKsK,cAAetK,KAAKmF,KAAK+C,cAhCjDlI,KAAK0K,MAAQtI,WAAWpC,KAAKiK,KAAKtK,KAAKK,MAAO,O,qCAoChDA,KAAKoK,cAAcqB,mBACnBzL,KAAKqK,qBAAqBoB,mBAC1BzL,KAAKmK,WAAWsB,qB,kCAGNT,EAAOE,GACjB,IAAMQ,EAAOP,OAAOC,gBAAgBpL,KAAKmF,KAAKsE,SAE9CiC,EAAKC,OAAO,SAAS,SAAUC,GAC7BC,QAAQC,IAAIF,MAGT5L,KAAK+L,OACR/L,KAAKgM,kBAAkBN,EAAM,IAAM,KAGrC,IAAIO,EAAaP,EAAKQ,SAASlB,EAAOE,GAkBtC,OAhBEe,EADwB,qBAAfA,EACI,iBAEApH,KAAKC,UAChBmH,GACA,SAAUxE,EAAK0E,GACb,MAAsB,qBAARA,GAA+B,OAARA,GAAgBA,EAAIC,YACrDC,OAAOF,EAAIC,YAAY,MACvBD,IAAgC,IAAxBA,EAAIG,kBAAsD,IAA1BH,EAAII,kBAE7B,oBAARJ,EACP,qBAAuBA,EAAI9P,OAC3B8P,EAHA,cAAgBA,EAAIpP,UAAYoP,EAAIpP,UAAUyP,WAAa,IAAM,MAKvE,K,wCAMYd,EAAMe,EAASC,GAC/B,IAAIC,EAAQ,EACNC,EAAOC,KAAKC,MAEZC,EAAgB,WACpB,GAAIJ,EAAQD,EAGV,KAAM,CACJM,KAAM,QACN/K,QACE,6GACFgL,OAAO,IAAIC,OAAQD,OAGvB,GAAIJ,KAAKC,MAAQF,EAAOH,EAGtB,KAAM,CACJO,KAAM,QACN/K,QAAS,yDACTgL,OAAO,IAAIC,OAAQD,QAMzBvB,EAAKC,OAAO,oBAAoB,WAC9BgB,IACAI,OAEFrB,EAAKC,OAAO,mBAAmB,WAC7BgB,IACAI,S,+BAKF,IAAM5I,EAAU,CACdgJ,QAAS,CAAEC,SAAS,GACpBC,YAAa,MACbC,aAAa,EACbC,iBAAiB,EACjBC,sBAAsB,EACtBC,qBAAsB,eAaxB,OACE,kBAACC,EAAA,EAAD,CAAWC,OAAK,GACd,kBAAC,EAAD,CACExF,QAASnI,KAAKmI,QACdG,eAAgBtI,KAAK4N,WAAWjO,KAAKK,MACrCuI,QAASA,MAEX,kBAACsF,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAMC,iBAAiB,YAAYC,YAAY,EAAO7U,GAAG,oBACvD,kBAAC8U,EAAA,EAAD,CAAKpO,SAAS,YAAYlG,MAAM,YAAYiH,UAAU,UACpD,kBAAC,EAAD,CACE8D,SAAS,UACTwJ,MAAM,eACNhK,QAASA,EACTiK,SAAUpO,KAAKqO,mBAAmB1O,KAAKK,MACvC4C,eAAgB5C,KAAKsO,sBAAsB3O,KAAKK,MAChDtE,MAAM,YACNuE,eAAe,KAGnB,kBAACiO,EAAA,EAAD,CAAKpO,SAAS,iBAAiBlG,MAAM,kBAAkBiH,UAAU,UAC/D,kBAAC,EAAD,CACE8D,SAAS,OACTwJ,MAAM,eACNhK,QAASA,EACTiK,SAAUpO,KAAKuO,uBAAuB5O,KAAKK,MAC3C4C,eAAgB5C,KAAKwO,6BAA6B7O,KAAKK,MACvDtE,MAAM,kBACN+S,SAAS,yFACTC,cAAc,6BAMxB,kBAACb,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAMC,iBAAiB,UAAUC,YAAY,EAAO7U,GAAG,kBACrD,kBAAC8U,EAAA,EAAD,CAAKpO,SAAS,SAASlG,MAAM,cAAciH,UAAU,UACnD,kBAAC,EAAD,CACE8D,SAAS,OACTwJ,MAAM,eACNhK,QAASA,EACTiK,SAAUpO,KAAK2O,aAAahP,KAAKK,MACjC4C,eAAgB5C,KAAK4O,mBAAmBjP,KAAKK,MAC7CtE,MAAM,iBAGV,kBAACwS,EAAA,EAAD,CAAKpO,SAAS,UAAUlG,MAAM,UAAUiH,UAAU,UAChD,kBAAC,EAAD,CACE8D,SAAS,OACTwJ,MAAM,eACNhK,QA/DS,CACrBkJ,YAAa,MACbF,QAAS,CAAEC,SAAS,GACpBG,iBAAiB,EACjBD,aAAa,EACbE,sBAAsB,EACtBlG,UAAU,EACVmG,qBAAsB,eAyDV7K,eAAgB5C,KAAK6O,sBAAsBlP,KAAKK,MAChDtE,MAAM,UACNyE,oBAAoB,a,GAnTL8C,IAAMxB,WCbxBqN,E,uKAJX,OAAO,kBAAC,EAAD,U,GAFOrN,aCSEsN,QACW,cAA7B5D,OAAO6D,SAASC,UAEe,UAA7B9D,OAAO6D,SAASC,UAEhB9D,OAAO6D,SAASC,SAASC,MAAM,2DCLnCC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SDmH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAACC,GACLA,EAAaC,gBAEdC,OAAM,SAACzJ,GACNyF,QAAQzF,MAAMA,EAAMnE,c","file":"static/js/main.4c5559f5.chunk.js","sourcesContent":["export default {\n  invoice: {\n    Account: {\n      'Account Name': 'Firefly',\n      Order: [\n        {\n          OrderID: 'order103',\n          Product: [\n            {\n              'Product Name': 'Bowler Hat',\n              ProductID: 858383,\n              SKU: '0406654608',\n              Description: {\n                Colour: 'Purple',\n                Width: 300,\n                Height: 200,\n                Depth: 210,\n                Weight: 0.75,\n              },\n              Price: 34.45,\n              Quantity: 2,\n            },\n            {\n              'Product Name': 'Trilby hat',\n              ProductID: 858236,\n              SKU: '0406634348',\n              Description: {\n                Colour: 'Orange',\n                Width: 300,\n                Height: 200,\n                Depth: 210,\n                Weight: 0.6,\n              },\n              Price: 21.67,\n              Quantity: 1,\n            },\n          ],\n        },\n        {\n          OrderID: 'order104',\n          Product: [\n            {\n              'Product Name': 'Bowler Hat',\n              ProductID: 858383,\n              SKU: '040657863',\n              Description: {\n                Colour: 'Purple',\n                Width: 300,\n                Height: 200,\n                Depth: 210,\n                Weight: 0.75,\n              },\n              Price: 34.45,\n              Quantity: 4,\n            },\n            {\n              ProductID: 345664,\n              SKU: '0406654603',\n              'Product Name': 'Cloak',\n              Description: {\n                Colour: 'Black',\n                Width: 30,\n                Height: 20,\n                Depth: 210,\n                Weight: 2,\n              },\n              Price: 107.99,\n              Quantity: 1,\n            },\n          ],\n        },\n      ],\n    },\n  },\n  address: {\n    FirstName: 'Fred',\n    Surname: 'Smith',\n    Age: 28,\n    Address: {\n      Street: 'Hursley Park',\n      City: 'Winchester',\n      Postcode: 'SO21 2JN',\n    },\n    Phone: [\n      {\n        type: 'home',\n        number: '0203 544 1234',\n      },\n      {\n        type: 'office',\n        number: '01962 001234',\n      },\n      {\n        type: 'office',\n        number: '01962 001235',\n      },\n      {\n        type: 'mobile',\n        number: '077 7700 1234',\n      },\n    ],\n    Email: [\n      {\n        type: 'office',\n        address: ['fred.smith@my-work.com', 'fsmith@my-work.com'],\n      },\n      {\n        type: 'home',\n        address: ['freddy@my-social.com', 'frederic.smith@very-serious.com'],\n      },\n    ],\n    Other: {\n      'Over 18 ?': true,\n      Misc: null,\n      'Alternative.Address': {\n        Street: 'Brick Lane',\n        City: 'London',\n        Postcode: 'E1 6RF',\n      },\n    },\n  },\n  schema: {\n    $schema: 'http://json-schema.org/draft-04/schema#',\n    required: ['Account'],\n    type: 'object',\n    id: 'file://input-schema.json',\n    properties: {\n      Account: {\n        required: ['Order'],\n        type: 'object',\n        properties: {\n          Customer: {\n            required: ['First Name', 'Surname'],\n            type: 'object',\n            properties: {\n              'First Name': {\n                type: 'string',\n              },\n              Surname: {\n                type: 'string',\n              },\n            },\n          },\n          AccID: {\n            type: 'string',\n          },\n          Order: {\n            items: {\n              required: ['OrderID', 'Product'],\n              type: 'object',\n              properties: {\n                OrderID: {\n                  type: 'string',\n                },\n                Product: {\n                  items: {\n                    required: ['ProductID', 'Product Name', 'Price', 'Quantity'],\n                    type: 'object',\n                    properties: {\n                      SKU: {\n                        type: 'string',\n                      },\n                      Description: {\n                        type: 'object',\n                        properties: {\n                          Width: {\n                            type: 'integer',\n                          },\n                          Depth: {\n                            type: 'integer',\n                          },\n                          Weight: {\n                            type: 'number',\n                          },\n                          Colour: {\n                            type: 'string',\n                          },\n                          Material: {\n                            type: 'string',\n                          },\n                          Height: {\n                            type: 'integer',\n                          },\n                        },\n                      },\n                      'Product Name': {\n                        type: 'string',\n                      },\n                      Price: {\n                        type: 'number',\n                      },\n                      Quantity: {\n                        type: 'integer',\n                      },\n                      ProductID: {\n                        type: 'integer',\n                      },\n                    },\n                  },\n                  type: 'array',\n                },\n              },\n            },\n            type: 'array',\n          },\n          'Account Name': {\n            type: 'string',\n          },\n          Address: {\n            required: ['Address Line 1', 'City', 'Postcode'],\n            type: 'object',\n            properties: {\n              'Address Line 1': {\n                type: 'string',\n              },\n              'Address Line 2': {\n                type: 'string',\n              },\n              Postcode: {\n                type: 'string',\n              },\n              City: {\n                type: 'string',\n              },\n            },\n          },\n        },\n      },\n    },\n  },\n  library: {\n    library: {\n      books: [\n        {\n          title: 'Structure and Interpretation of Computer Programs',\n          authors: ['Abelson', 'Sussman'],\n          isbn: '9780262510875',\n          price: 38.9,\n          copies: 2,\n        },\n        {\n          title: 'The C Programming Language',\n          authors: ['Kernighan', 'Richie'],\n          isbn: '9780131103627',\n          price: 33.59,\n          copies: 3,\n        },\n        {\n          title: 'The AWK Programming Language',\n          authors: ['Aho', 'Kernighan', 'Weinberger'],\n          isbn: '9780201079814',\n          copies: 1,\n        },\n        {\n          title: 'Compilers: Principles, Techniques, and Tools',\n          authors: ['Aho', 'Lam', 'Sethi', 'Ullman'],\n          isbn: '9780201100884',\n          price: 23.38,\n          copies: 1,\n        },\n      ],\n      loans: [\n        {\n          customer: '10001',\n          isbn: '9780262510875',\n          return: '2016-12-05',\n        },\n        {\n          customer: '10003',\n          isbn: '9780201100884',\n          return: '2016-10-22',\n        },\n        {\n          customer: '10003',\n          isbn: '9780262510875',\n          return: '2016-12-22',\n        },\n      ],\n      customers: [\n        {\n          id: '10001',\n          name: 'Joe Doe',\n          address: {\n            street: '2 Long Road',\n            city: 'Winchester',\n            postcode: 'SO22 5PU',\n          },\n        },\n        {\n          id: '10002',\n          name: 'Fred Bloggs',\n          address: {\n            street: '56 Letsby Avenue',\n            city: 'Winchester',\n            postcode: 'SO22 4WD',\n          },\n        },\n        {\n          id: '10003',\n          name: 'Jason Arthur',\n          address: {\n            street: '1 Preddy Gate',\n            city: 'Southampton',\n            postcode: 'SO14 0MG',\n          },\n        },\n      ],\n    },\n  },\n  empty: {},\n};\n","export default {\n  transforms: [\n    {\n      id: 'a248b600-8351-4bf4-9445-dbc716b1374d',\n      name: 'Invoice',\n      transform: '$sum(Account.Order.Product.(Price * Quantity))',\n      description: 'JSONata transform for Invoice',\n      jsondata: 'invoice',\n      isActive: true,\n    },\n    {\n      id: '403d9ad1-84f8-4f18-92fe-0f30dd03291e',\n      name: 'Address',\n      transform:\n        \"{\\n  'name': FirstName & ' ' & Surname,\\n  'mobile': Phone[type = 'mobile'].number\\n}\",\n      description: 'JSONata transform for Address',\n      jsondata: 'address',\n      isActive: true,\n    },\n    {\n      id: 'e90d3a1b-b78a-4e21-b4bd-0e409882e151',\n      name: 'Schema',\n      transform: '**.properties ~> $keys()',\n      description: 'JSONata transform for Schema',\n      jsondata: 'schema',\n      isActive: true,\n    },\n    {\n      id: '290207d3-8e18-4c25-af31-738feff4c477',\n      name: 'Library',\n      transform:\n        \"library.loans @ $L.books @ $B[$L.isbn = $B.isbn].customers[$L.customer = id].{\\n  'customer': name,\\n  'book': $B.title,\\n  'due': $L.return\\n}\",\n      description: 'JSONata transform for Library',\n      jsondata: 'library',\n      isActive: true,\n    },\n  ],\n};\n","export default {\n  tokenizer: {\n    root: [\n      [/\\/\\*.*\\*\\//, 'jsonata-comment'],\n      [/'.*'/, 'jsonata-string'],\n      [/\".*\"/, 'jsonata-string'],\n      [/\\$[a-zA-Z0-9_]*/, 'jsonata-variable'],\n      [/[a-zA-Z0-9_]+/, 'jsonata-names'],\n    ],\n  },\n};\n","import extended from './extended';\n\nconst merged = [...extended];\n\n/**\n * Return array of monaco.languages.CompletionItem\n *\n * @param {*} monaco\n * @returns {Array<monaco.languages.CompletionItem>}\n */\nexport function getSuggestions(monaco, range) {\n  const suggestions = merged.map((value, index, source) => {\n    const suggestion = {};\n    suggestion.label = `$${value.label}`;\n    suggestion.kind = monaco.languages.CompletionItemKind.Function;\n    suggestion.insertText = '';\n    suggestion.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n    suggestion.documentation = {};\n    suggestion.documentation.value = value.description;\n\n    if (value.parameters) {\n      let documentation = suggestion.documentation.value;\n      documentation += '\\n\\n';\n      documentation += '**Parameters**\\n\\n';\n      if (value.parameters && value.parameters.length !== 0) {\n        let params = '';\n        value.parameters.forEach((value, index, source) => {\n          const defaultVal = value.defaultIsJSONata ? '\\\\' + value.default : value.default;\n          params += `{${value.type}} ${\n            value.optional\n              ? `${value.default ? `[${value.label}=${defaultVal}]` : `[${value.label}]`}`\n              : `${value.default ? `${value.label}=${defaultVal}` : `${value.label}`}`\n          }`;\n          params += value.optional ? ' *OPTIONAL*\\n\\n' : '\\n\\n';\n          params += `${value.documentation}\\n\\n`;\n        });\n        documentation += params.slice(0, -1);\n      }\n      suggestion.documentation.value = documentation;\n    }\n\n    if (value.returns) {\n      let documentation = suggestion.documentation.value;\n      documentation += '\\n\\n';\n      documentation += '**Returns**\\n\\n';\n      documentation += `{${value.returns}}\\n\\n`;\n      suggestion.documentation.value = documentation;\n    }\n\n    suggestion.detail = value.signature;\n    if (value.parameters) {\n      let signature = suggestion.label;\n      signature += '(';\n      if (value.parameters && value.parameters.length !== 0) {\n        let params = '';\n        value.parameters.forEach((value, index, source) => {\n          params += `${value.label},`;\n        });\n        signature += params.slice(0, -1);\n      }\n      signature += ')';\n      suggestion.detail = signature;\n    }\n\n    suggestion.insertText = value.label;\n    if (value.parameters) {\n      let insertText = suggestion.insertText;\n      insertText += '(';\n      if (value.parameters && value.parameters.length !== 0) {\n        let params = '';\n        value.parameters.forEach((value, index, source) => {\n          const defaultVal = value.defaultIsJSONata ? '\\\\' + value.default : value.default;\n          params += `$\\{${index + 1}:${value.default ? defaultVal : value.label}}, `;\n        });\n        insertText += params.slice(0, -2);\n      }\n      insertText += ')';\n      suggestion.insertText = insertText;\n    }\n\n    suggestion.range = range;\n    return suggestion;\n  });\n\n  return suggestions;\n}\n\n/**\n * Return object to use for hoverProvider lookup\n *\n * @returns {object}\n */\nexport function getHovers() {\n  const hovers = merged.reduce((acc, value, index, source) => {\n    let documentation = value.description;\n    if (value.parameters) {\n      documentation += '\\n\\n';\n      documentation += '**Parameters**\\n\\n';\n      if (value.parameters && value.parameters.length !== 0) {\n        let params = '';\n        value.parameters.forEach((value, index, source) => {\n          const defaultVal = value.defaultIsJSONata ? '\\\\' + value.default : value.default;\n          params += `{${value.type}} ${\n            value.optional\n              ? `${value.default ? `[${value.label}=${defaultVal}]` : `[${value.label}]`}`\n              : `${value.default ? `${value.label}=${defaultVal}` : `${value.label}`}`\n          }`;\n          params += value.optional ? ' *OPTIONAL*\\n\\n' : '\\n\\n';\n          params += `${value.documentation}\\n\\n`;\n        });\n        documentation += params.slice(0, -1);\n      }\n    }\n\n    if (value.returns) {\n      documentation += '\\n\\n';\n      documentation += '**Returns**\\n\\n';\n      documentation += `{${value.returns}}\\n\\n`;\n    }\n\n    let detail = `$${value.label}()`;\n    if (value.parameters) {\n      let signature = `$${value.label}`;\n      signature += '(';\n      if (value.parameters && value.parameters.length !== 0) {\n        let params = '';\n        value.parameters.forEach((value, index, source) => {\n          params += `${value.label},`;\n        });\n        signature += params.slice(0, -1);\n      }\n      signature += ')';\n      detail = signature;\n    }\n    acc[value.label] = [{ value: `**${detail}**` }, { value: documentation }];\n    return acc;\n  }, {});\n\n  return hovers;\n}\n","export default [];\n","/* eslint-disable no-template-curly-in-string */\nimport monarchDefinition from './jsonata.monarch';\nimport { getSuggestions, getHovers } from './functions/custom';\n\nexport default function (monaco) {\n  monaco.languages.register({\n    id: 'jsonata',\n  });\n  monaco.languages.setMonarchTokensProvider('jsonata', monarchDefinition);\n\n  const brackets = [\n    { open: '(', close: ')' },\n    { open: '[', close: ']' },\n    { open: '{', close: '}' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n    { open: '`', close: '`' },\n  ];\n  monaco.languages.setLanguageConfiguration('jsonata', {\n    brackets: [\n      ['(', ')'],\n      ['[', ']'],\n      ['{', '}'],\n    ],\n    autoClosingPairs: brackets,\n    surroundingPairs: brackets,\n    indentationRules: {\n      // ^(.*\\*/)?\\s*\\}.*$\n      decreaseIndentPattern: /^((?!.*?\\/\\*).*\\*\\/)?\\s*[}\\])].*$/,\n      // ^.*\\{[^}\"']*$\n      increaseIndentPattern: /^((?!\\/\\/).)*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/,\n    },\n    insertSpaces: true,\n    tabSize: 2,\n  });\n\n  // Define a new theme that contains only rules that match this language\n  monaco.editor.defineTheme('jsonataTheme', {\n    base: 'vs',\n    inherit: true,\n    rules: [\n      { token: 'jsonata-string', foreground: 'a00000' },\n      { token: 'jsonata-comment', foreground: '008000' },\n      { token: 'jsonata-variable', foreground: 'ff4000' },\n      { token: 'jsonata-names', foreground: '0000c0' },\n    ],\n  });\n\n  // Register a completion item provider for the new language\n  monaco.languages.registerCompletionItemProvider('jsonata', {\n    provideCompletionItems: (model, position) => {\n      var word = model.getWordUntilPosition(position);\n      var range = {\n        startLineNumber: position.lineNumber,\n        endLineNumber: position.lineNumber,\n        startColumn: word.startColumn,\n        endColumn: word.endColumn,\n      };\n      return {\n        suggestions: getSuggestions(monaco, range),\n      };\n    },\n  });\n\n  monaco.languages.registerHoverProvider('jsonata', {\n    provideHover: (model, position) => {\n      var word = model.getWordAtPosition(position);\n      if (word) {\n        var range = {\n          startLineNumber: position.lineNumber,\n          endLineNumber: position.lineNumber,\n          startColumn: word.startColumn,\n          endColumn: word.endColumn,\n        };\n        const entry = getHovers()[word.word];\n        if (entry) {\n          return {\n            range,\n            contents: entry,\n          };\n        }\n      }\n      return null;\n    },\n  });\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\n\nexport default class EditorNav extends Component {\n  constructor(props) {\n    super(props);\n    this.onFormatClick = this.onFormatClick.bind(this);\n    this.onDownloadClick = this.onDownloadClick.bind(this);\n    this.onDownloadCSVClick = this.onDownloadCSVClick.bind(this);\n  }\n\n  onFormatClick(eventKey, event) {\n    if (this.props.formatEnabled && this.props.onFormatClick) {\n      this.props.onFormatClick(eventKey, event);\n    }\n  }\n\n  onDownloadClick(eventKey, event) {\n    if (this.props.downloadEnabled && this.props.onDownloadClick) {\n      this.props.onDownloadClick(eventKey, event);\n    }\n  }\n\n  onDownloadCSVClick(eventKey, event) {\n    if (this.props.downloadCSVEnabled && this.props.onDownloadCSVClick) {\n      this.props.onDownloadCSVClick(eventKey, event);\n    }\n  }\n\n  render() {\n    const {\n      label,\n      formatEnabled,\n      formatLabel,\n      formatTooltip,\n      downloadEnabled,\n      downloadLabel,\n      downloadTooltip,\n      downloadCSVEnabled,\n      downloadCSVLabel,\n      downloadCSVTooltip,\n      className,\n    } = this.props;\n\n    let formatlink;\n    if (formatEnabled) {\n      formatlink = (\n        <OverlayTrigger\n          placement=\"bottom\"\n          overlay={<Tooltip id={`tooltip-format`}>{formatTooltip}</Tooltip>}\n        >\n          <Nav>\n            <Nav.Link onClick={this.onFormatClick}>{formatLabel}</Nav.Link>\n          </Nav>\n        </OverlayTrigger>\n      );\n    }\n\n    let downloadlink;\n    if (downloadEnabled) {\n      downloadlink = (\n        <OverlayTrigger\n          placement=\"bottom\"\n          overlay={<Tooltip id={`tooltip-download`}>{downloadTooltip}</Tooltip>}\n        >\n          <Nav>\n            <Nav.Link onClick={this.onDownloadClick}>{downloadLabel}</Nav.Link>\n          </Nav>\n        </OverlayTrigger>\n      );\n    }\n\n    let downloadCSVlink;\n    if (downloadCSVEnabled) {\n      downloadCSVlink = (\n        <OverlayTrigger\n          placement=\"bottom\"\n          overlay={<Tooltip id={`tooltip-downloadCSV`}>{downloadCSVTooltip}</Tooltip>}\n        >\n          <Nav>\n            <Nav.Link onClick={this.onDownloadCSVClick}>{downloadCSVLabel}</Nav.Link>\n          </Nav>\n        </OverlayTrigger>\n      );\n    }\n\n    return (\n      <div className={className}>\n        <Navbar className=\"py-0 mt-0\" bg=\"light\" variant=\"light\">\n          <Nav className=\"mr-auto\">\n            <Navbar.Text className=\"\">{<strong>{label}</strong>}</Navbar.Text>\n          </Nav>\n          {formatlink}\n          {downloadlink}\n          {downloadCSVlink}\n        </Navbar>\n      </div>\n    );\n  }\n}\n\nEditorNav.propTypes = {\n  label: PropTypes.string,\n  formatEnabled: PropTypes.bool,\n  formatLabel: PropTypes.string,\n  formatTooltip: PropTypes.string,\n  onFormatClick: PropTypes.func,\n  downloadEnabled: PropTypes.bool,\n  downloadLabel: PropTypes.string,\n  downloadTooltip: PropTypes.string,\n  onDownloadClick: PropTypes.func,\n  downloadCSVEnabled: PropTypes.bool,\n  downloadCSVLabel: PropTypes.string,\n  downloadCSVTooltip: PropTypes.string,\n  onDownloadCSVClick: PropTypes.func,\n  className: PropTypes.string,\n};\n\nEditorNav.defaultProps = {\n  label: 'Header',\n  formatEnabled: true,\n  formatLabel: 'Format',\n  formatTooltip: 'Format the editor contents',\n  onFormatClick: function () {},\n  downloadEnabled: true,\n  downloadLabel: 'Download',\n  downloadTooltip: 'Download the editor contents',\n  onDownloadClick: function () {},\n  downloadCSVEnabled: false,\n  downloadCSVLabel: 'Download CSV',\n  downloadCSVTooltip: 'Download the editor contents as CSV (UTF-8)',\n  onDownloadCSVClick: function () {},\n  className: 'editor-nav',\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert } from 'react-bootstrap';\n\nexport default class Notification extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: null,\n      alertVisible: false,\n      variant: this.props.variant,\n    };\n  }\n\n  setAlertVisible = (isVisible) => {\n    this.setState({\n      alertVisible: isVisible,\n    });\n  };\n\n  setMessage = (message, variant) => {\n    this.setState({\n      message: message ? message : null,\n      alertVisible: message ? true : false,\n      variant: variant ? variant : this.props.variant,\n    });\n    if (this.props.autodismiss && this.props.delay && this.props.delay > 0) {\n      setTimeout(() => {\n        this.setAlertVisible(false);\n      }, this.props.delay);\n    }\n  };\n\n  render() {\n    let notification;\n    if (this.state.alertVisible) {\n      notification = (\n        <Alert\n          variant={this.state.variant}\n          onClose={() => this.setAlertVisible(false)}\n          className=\"mb-0\"\n          dismissible\n        >\n          {this.state.message}\n        </Alert>\n      );\n    }\n\n    return <div>{notification}</div>;\n  }\n}\n\nNotification.propTypes = {\n  autodismiss: PropTypes.bool.isRequired,\n  delay: PropTypes.number.isRequired,\n  variant: PropTypes.string.isRequired,\n};\n\nNotification.defaultProps = {\n  autodismiss: false,\n  delay: 2000,\n  variant: 'warning',\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MonacoEditor from 'react-monaco-editor';\nimport ReactResizeDetector from 'react-resize-detector';\nimport FileDownload from 'react-file-download';\nimport Delve from 'dlv';\nimport PapaParse from 'papaparse';\nimport _ from 'lodash';\n\nimport registerJsonataLanguage from './monacoIntegration/jsonata';\nimport EditorNav from './EditorNav';\nimport Notification from './Notification';\n\n/**\n * A wrapper for the react-monaco-editor that adds a layout method and\n * some convenient props.\n */\nexport default class EnhancedEditorWithNav extends Component {\n  constructor(props) {\n    super(props);\n    this.monacoEditor = null;\n    this.monaco = null;\n    this.editorDidMount = this.editorDidMount.bind(this);\n    this._onFormatClick = this._onFormatClick.bind(this);\n    this._onDownloadClick = this._onDownloadClick.bind(this);\n    this._onDownloadCSVClick = this._onDownloadCSVClick.bind(this);\n    this.notificationElement = React.createRef();\n  }\n\n  getModel() {\n    if (this.monacoEditor != null) {\n      return this.monacoEditor.getModel();\n    }\n  }\n\n  /**\n   * Trigger layout\n   *\n   */\n  layout() {\n    if (this.monacoEditor != null) {\n      this.monacoEditor.layout();\n    }\n  }\n\n  /**\n   * Clear any decorations from editor\n   *\n   */\n  clearDecorations() {\n    if (this.monacoEditor != null) {\n      this.monacoEditor.decorations = this.monacoEditor.deltaDecorations(\n        this.monacoEditor.decorations,\n        []\n      );\n    }\n  }\n\n  /**\n   * Add an error decoration based on start and end position\n   *\n   * @param {integer} start\n   * @param {integer} end\n   */\n  addErrorDecoration(start, end) {\n    if (this.monacoEditor != null) {\n      const buffer = this.monacoEditor.getModel().getValue();\n      const resolve = (offset) => {\n        let line = 1;\n        let column = 1;\n        let position = 1;\n        while (position < offset) {\n          if (buffer.charAt(position) === '\\n') {\n            line++;\n            column = 0;\n          } else {\n            column++;\n          }\n          position++;\n        }\n        return { line, column };\n      };\n      const from = resolve(start);\n      const to = resolve(end);\n      this.monacoEditor.decorations = this.monacoEditor.deltaDecorations(\n        this.monacoEditor.decorations,\n        [\n          {\n            range: new this.monaco.Range(from.line, from.column, to.line, to.column),\n            options: { inlineClassName: 'jsonataErrorMarker' },\n          },\n          {\n            range: new this.monaco.Range(from.line, 1, to.line, 1),\n            options: {\n              isWholeLine: true,\n              linesDecorationsClassName: 'jsonataErrorMargin',\n            },\n          },\n        ]\n      );\n    }\n  }\n\n  updateNoUndo(text) {\n    const model = this.getModel();\n    model.applyEdits([\n      {\n        range: new this.monaco.Range(\n          1,\n          1,\n          model.getLineCount(),\n          model.getLineMaxColumn(model.getLineCount())\n        ),\n        text,\n      },\n    ]);\n  }\n\n  _onFormatClick(eventKey, event) {\n    if (this.props.formatEnabled && this.props.language === 'json') {\n      const model = this.getModel();\n      const formatted = JSON.stringify(JSON.parse(model.getValue()), null, 2);\n      this.updateNoUndo(formatted);\n    }\n  }\n\n  _onDownloadClick(eventKey, event) {\n    if (this.props.downloadEnabled) {\n      const filename = `${Delve(this, 'props.label', 'filename')}.${Delve(\n        this,\n        'props.language',\n        'json'\n      )}`;\n      const model = this.getModel();\n      const data = model.getValue();\n      FileDownload(data, filename.toLowerCase(), 'text/plain');\n    }\n  }\n\n  _onDownloadCSVClick(eventKey, event) {\n    if (this.props.downloadCSVEnabled) {\n      const lang = Delve(this, 'props.language', null);\n      const filename = `${Delve(this, 'props.label', 'filename')}.csv`;\n\n      if (lang.toLowerCase() === 'json') {\n        const papaparseConfig = {\n          quotes: true,\n          quoteChar: '\"',\n          escapeChar: '\"',\n          delimiter: ',',\n          header: true,\n          newline: '\\r\\n',\n        };\n\n        const model = this.getModel();\n        const text = model.getValue();\n        let data = JSON.parse(text);\n        if (!_.isArray(data)) {\n          data = [data];\n        }\n        try {\n          const csv = PapaParse.unparse(data, papaparseConfig);\n          if (!_.isEmpty(csv)) {\n            FileDownload(csv, filename.toLowerCase(), 'text/csv');\n          } else {\n            this.notificationElement.current.setMessage(\n              'The JSON parsed to CSV was an empty file.'\n            );\n          }\n        } catch (error) {\n          this.notificationElement.current.setMessage(\n            `There was a problem parsing the JSON to CSV. Err: ${error.message}`,\n            'danger'\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Add an error decoration based on extracting position from\n   * err, supports json and jsonata\n   *\n   * @param {*} err\n   */\n  addErrorDecorationFromErr(err) {\n    let start = 0;\n    let end = 0;\n\n    if (this.props.language === 'json') {\n      const pos = err.message.indexOf('at position ');\n      if (pos !== -1) {\n        start = parseInt(err.message.substr(pos + 12)) + 1;\n        end = start + 1;\n      }\n    }\n\n    if (this.props.language === 'jsonata') {\n      end = err.position + 1;\n      start = end - (err.token ? err.token.length : 1);\n    }\n\n    if (this.monacoEditor != null && start !== end) {\n      this.addErrorDecoration(start, end);\n    }\n  }\n\n  /**\n   * This method is called when a component is being removed from the DOM\n   *\n   */\n  componentWillUnmount() {\n    this.monacoEditor = null;\n    this.monaco = null;\n  }\n\n  /**\n   * An event emitted when the editor has been mounted (similar to componentDidMount of React).\n   *\n   */\n  editorDidMount(editor, monaco) {\n    editor.decorations = [];\n    if (this.props.language === 'jsonata') {\n      registerJsonataLanguage(monaco);\n      monaco.editor.setModelLanguage(editor.getModel(), 'jsonata');\n      editor.addAction({\n        id: 'jsonata-lambda',\n        label: 'Lambda',\n        keybindings: [monaco.KeyCode.F11],\n        run: function (ed) {\n          ed.trigger('keyboard', 'type', { text: '' });\n          return null;\n        },\n      });\n    }\n    this.monacoEditor = editor;\n    this.monaco = monaco;\n\n    // Bubble up the event\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this, monaco);\n    }\n  }\n\n  render() {\n    const {\n      width,\n      height,\n      readOnly,\n      value,\n      formatEnabled,\n      downloadEnabled,\n      downloadCSVEnabled,\n      label,\n      options = {},\n      editorDidMount,\n      className,\n      ...other\n    } = this.props;\n\n    return (\n      <div className={className}>\n        <Notification ref={this.notificationElement} autodismiss={true} delay={3000}></Notification>\n        <EditorNav\n          key={`nav-${label}`}\n          label={label}\n          formatEnabled={formatEnabled}\n          downloadEnabled={downloadEnabled}\n          downloadCSVEnabled={downloadCSVEnabled}\n          onFormatClick={this._onFormatClick}\n          onDownloadClick={this._onDownloadClick}\n          onDownloadCSVClick={this._onDownloadCSVClick}\n        />\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={() => {\n            this.layout();\n          }}\n        >\n          <MonacoEditor\n            key={`editor-${label}`}\n            width={width || '100%'}\n            height={height || '100%'}\n            value={value}\n            options={{\n              ...options,\n            }}\n            {...other}\n            editorDidMount={this.editorDidMount}\n          />\n        </ReactResizeDetector>\n      </div>\n    );\n  }\n}\n\nEnhancedEditorWithNav.propTypes = {\n  editorDidMount: PropTypes.func,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  onChange: PropTypes.func,\n  options: PropTypes.object,\n  value: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  formatEnabled: PropTypes.bool,\n  downloadEnabled: PropTypes.bool,\n  downloadCSVEnabled: PropTypes.bool,\n  label: PropTypes.string,\n};\n\nEnhancedEditorWithNav.defaultProps = {\n  className: 'enhanced-editor',\n  formatEnabled: true,\n  downloadEnabled: true,\n  downloadCSVEnabled: false,\n  label: 'Editor',\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOcSURBVFiF7ZZfaJZVGMB/Z7XKls0/renU0aggsujGovLG6SyIFl2MUXhRRBF0010YIXUVrOg+6aIgyCEZJSJFZEShWQaOSJlSaphb1tawbU039+vinG+9e/e+3/cJUTc+8PF93znn9/w7z3nOgctyWf5nCWUT6mrgZuBG4HfgpxDCqXqUqrcCNwHNwDBwLIRwth6wQX1K/dZiOaw+pzYWsIvUreqxAu6i+oXaoxYHrXaoh0oM5+WIemeGvVc9WSf7uboyb/w29Wxm0cfqo2pLmm9Ru9UPM2vG1U71IXUqE+m76ia1WQ1qm7pF3Z9hT6sdFeNtGe/H1d4a2/Sg+ltm/WT6/Yt6fxUuqM+of6X1x9VW1D1pYFLdUM14Rtld6h+ZiIaMhVcP261OJ253UC8CDcDWEEJfWrQS6AQ6gOXAOPAr8A3wXQhhVn0E+Cjp7Q4h7ElsO7ABaAeWAX8ST8IBYCCEoPoi8CowSyaKXnWZuledtVxOpijWZsbWpq3cV4VTHTTWTW9l4MpsekIIo+o4MAC8D3wPjADXA6uALmAzcBy4IpfdYWAaOAh8ABwFRom9oB14AFgP/Ai0ZPdkLgPp/9WWndU4f036npeBClvGZedLM5DkArBO7QLWADcAkynCg8BnwFSJjWnjSdiY2KXABDBErIF9wPksMM8BdQnwKbCuSiDn1GeJ25Nl24BPgDuqsCPqk6UOhBDG1K+JFb8zGRkDrk0RbQIeBr4i7m2WPaMeBgaBXcAR4BzQRLwXNhMzcyDpmfN8Xg3UK0U1cAlseQ2kQulOXq4hVuwE/9TA7hDCiRLFTYndSDw1LcQsDAP7E3s6D81lQF2inqhxlqfVp/MZMPaBoRrseeONWNoHxtTtxHO7E/iB+Ba4jriPncQa2AW05dgz6tvAojR/NIQwojYTO2pXyszepGNhBko3rTjd/0oNNNRY2GBsz/muV4+RRnVprXULHFBvUfvUQWLTGAGmjNfnG+rtVYzerb6p/kxsVqPGt8KA+oq6qgiqyBb1dfVCjUKaSUbuyYytV3dY/RJTnVC3qY9XBoJq8mWUeH2Sou4Hvky/lwP3AY8BrWnNMLCigD0FvAccIl7FK4jF2wMsXsAWeLndWLlF2WpSXyuJdEZ9Sb2qhG1V+/NQ3oFtZfubU/ZEzokZtadOti/vwA51WH2rHgUZRS9k9Dx/CVxQ3zG+K/uzE0VXcy1FL6dP6fuhhG20Rgv4z+RvCtgtr73fkycAAAAASUVORK5CYII=\"","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport NavDropdown from 'react-bootstrap/NavDropdown';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport docs from './images/docs-white-32.png';\nimport docsextended from './images/docs-white-32.png';\nimport github from './images/github.png';\nimport _ from 'lodash';\n\nexport default class MainNav extends Component {\n  constructor(props) {\n    super(props);\n    this.onSelect = this.onSelect.bind(this);\n  }\n\n  createSourceItem(sourceItem) {\n    return (\n      <NavDropdown.Item key={sourceItem.id} eventKey={sourceItem.id}>\n        {sourceItem.name}\n      </NavDropdown.Item>\n    );\n  }\n\n  createSourceItems() {\n    const results = [];\n    _.forEach(this.props.sources, (value, key) => {\n      results.push(this.createSourceItem(value));\n    });\n    return (\n      <NavDropdown title=\"Select Base Data\" id=\"nav-selectdata\" onSelect={this.onSelect}>\n        {results}\n      </NavDropdown>\n    );\n  }\n\n  onSelect(eventKey, event) {\n    if (this.props.onSourceSelect) {\n      this.props.onSourceSelect(eventKey, event);\n    }\n  }\n\n  render() {\n    const { version } = this.props;\n\n    return (\n      <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\n        <Navbar.Brand>JSONata Extended Excerciser</Navbar.Brand>{' '}\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\n          <Nav className=\"mr-auto\">{this.createSourceItems()}</Nav>\n          <Nav>\n            <Nav.Item>\n              <OverlayTrigger\n                placement=\"bottom\"\n                overlay={<Tooltip id={`tooltip-bottom`}>JSONata Extended Documentation.</Tooltip>}\n              >\n                <Nav.Link\n                  eventKey=\"extendedjsonata\"\n                  href=\"https://martinholden-skillsoft.github.io/jsonata-extended/doc/\"\n                  target=\"_blank\"\n                >\n                  <img src={docsextended} alt=\"JSONata Extended Documentation\" />\n                </Nav.Link>\n              </OverlayTrigger>\n            </Nav.Item>\n            <Nav.Item>\n              <OverlayTrigger\n                placement=\"bottom\"\n                overlay={<Tooltip id={`tooltip-bottom`}>Core JSONata Documentation</Tooltip>}\n              >\n                <Nav.Link\n                  eventKey=\"corejsonata\"\n                  href=\"https://docs.jsonata.org/overview\"\n                  target=\"_blank\"\n                >\n                  <img src={docs} alt=\"Core JSONata Documentation\" />\n                </Nav.Link>\n              </OverlayTrigger>\n            </Nav.Item>\n            <Nav.Item>\n              <OverlayTrigger\n                placement=\"bottom\"\n                overlay={<Tooltip id={`tooltip-bottom`}>Source</Tooltip>}\n              >\n                <Nav.Link\n                  eventKey=\"github\"\n                  href=\"https://github.com/martinholden-skillsoft/jsonata-extended-exerciser\"\n                  target=\"_blank\"\n                >\n                  <img src={github} alt=\"Source\" />\n                </Nav.Link>\n              </OverlayTrigger>\n            </Nav.Item>\n            <Nav.Item>\n              <OverlayTrigger\n                placement=\"bottom\"\n                overlay={<Tooltip id={`tooltip-bottom`}>View CHANGELOG</Tooltip>}\n              >\n                <Nav.Link\n                  eventKey=\"changelog\"\n                  href=\"https://github.com/martinholden-skillsoft/jsonata-extended-exerciser/blob/master/CHANGELOG.md\"\n                  target=\"_blank\"\n                >\n                  <Navbar.Text className=\"text-muted\">{` v${version}`}</Navbar.Text>\n                </Nav.Link>\n              </OverlayTrigger>\n            </Nav.Item>\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n    );\n  }\n}\n\nMainNav.propTypes = {\n  onSourceSelect: PropTypes.func,\n  sources: PropTypes.object,\n  version: PropTypes.string,\n};\n\nMainNav.defaultProps = {\n  onSourceSelect: function () {},\n  sources: {},\n  version: '',\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=\"","/**\n *  Copyright IBM Corp. 2016, 2020 All Rights Reserved\n *   Project name: JSONata\n *   This project is licensed under the MIT License, see LICENSE\n *\n * Enhanced by Martin Holden\n */\n\nimport React from 'react';\nimport sampledata from './data/sampledata';\nimport transforms from './data/transforms';\nimport _ from 'lodash';\nimport EnhancedMonacoEditorWithNav from './components/EnhancedEditorWithNav';\nimport MainNav from './components/MainNav';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport './exerciserbootstrap.css';\nimport { version } from '../package.json';\n\nclass ExerciserBootstrap extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Get transforms and configurations from window object\n    const dataexamples = transforms;\n\n    // Remove Workday\n    this.sources = dataexamples.transforms\n      .map((value, index, sourceArray) => {\n        const newObj = {};\n        newObj.id = value.id;\n        newObj.name = `${value.name}`;\n        newObj.type = value.jsondata;\n        newObj.jsonata = `${value.transform}`;\n        newObj.jsonatabinding = {};\n        return newObj;\n      })\n      .reduce((accumulator, currentValue, index, sourcearray) => {\n        accumulator[currentValue.id] = currentValue;\n        return accumulator;\n      }, {});\n\n    this.defaults = {\n      empty: {\n        id: 'empty',\n        name: 'Empty',\n        type: 'empty',\n        jsonata: `$.{}`,\n        jsonatabinding: {},\n      },\n    };\n\n    this.sources = {\n      ...this.defaults,\n      ...this.sources,\n    };\n\n    this.data = {\n      json: JSON.stringify({}, null, 2),\n      jsonata: `$.{}`,\n      jsonatabinding: JSON.stringify({}, null, 2),\n      result: null,\n    };\n  }\n\n  componentDidMount() {\n    this.eval();\n  }\n\n  editorOverwrite(editor, value) {\n    if (editor) {\n      editor.updateNoUndo(value);\n    }\n  }\n\n  allEditorsOverwrite() {\n    this.editorOverwrite(this.jsonEditor, this.data.json);\n    this.editorOverwrite(this.jsonataEditor, this.data.jsonata);\n    this.editorOverwrite(this.jsonatabindingEditor, this.data.jsonatabinding);\n    this.editorOverwrite(this.resultsEditor, this.data.results);\n  }\n\n  jsonEditorDidMount(editor, monaco) {\n    this.jsonEditor = editor;\n    this.editorOverwrite(this.jsonEditor, this.data.json);\n  }\n\n  jsonataEditorDidMount(editor, monaco) {\n    this.jsonataEditor = editor;\n    this.editorOverwrite(this.jsonataEditor, this.data.jsonata);\n  }\n\n  jsonatabindingEditorDidMount(editor, monaco) {\n    this.jsonatabindingEditor = editor;\n    this.editorOverwrite(this.jsonatabindingEditor, this.data.jsonatabinding);\n  }\n\n  resultsEditorDidMount(editor, monaco) {\n    this.resultsEditor = editor;\n    this.editorOverwrite(this.resultsEditor, this.data.result);\n  }\n\n  onChangeData(newValue, e) {\n    this.data.json = newValue;\n    clearTimeout(this.timer);\n    this.timer = setTimeout(this.eval.bind(this), 750);\n    this.clearMarkers();\n  }\n\n  onChangeExpression(newValue, e) {\n    this.data.jsonata = newValue;\n    clearTimeout(this.timer);\n    this.timer = setTimeout(this.eval.bind(this), 750);\n    this.clearMarkers();\n  }\n\n  onChangejsonatabinding(newValue, e) {\n    this.data.jsonatabinding = newValue;\n    clearTimeout(this.timer);\n    this.timer = setTimeout(this.eval.bind(this), 750);\n    this.clearMarkers();\n  }\n\n  changeData(eventkey, event) {\n    const selected = this.sources[eventkey];\n    this.data = {\n      json: JSON.stringify(sampledata[selected.type], null, 2),\n      jsonata: selected.jsonata,\n      jsonatabinding: JSON.stringify(selected.jsonatabinding || {}, null, 2),\n    };\n    this.allEditorsOverwrite();\n    clearTimeout(this.timer);\n    this.timer = setTimeout(this.eval.bind(this), 100);\n    this.clearMarkers();\n  }\n\n  eval() {\n    let input, jsonataResult, jsonatabinding, binding;\n\n    if (typeof window.jsonataExtended === 'undefined') {\n      this.timer = setTimeout(this.eval.bind(this), 750);\n      return;\n    }\n\n    try {\n      input = JSON.parse(this.data.json);\n    } catch (err) {\n      this.data.results = `ERROR IN INPUT JSON DATA: ${err.message}`;\n      this.jsonEditor.addErrorDecorationFromErr(err);\n      return;\n    }\n\n    try {\n      jsonatabinding = JSON.parse(this.data.jsonatabinding);\n    } catch (err) {\n      this.data.results = `ERROR IN BASE CONFIGURATION JSON DATA: ${err.message}`;\n      this.jsonatabindingEditor.addErrorDecorationFromErr(err);\n      return;\n    }\n\n    binding = _.merge({}, jsonatabinding);\n    // binding = {};\n\n    try {\n      if (this.data.jsonata !== '') {\n        jsonataResult = this.evalJsonata(input, binding);\n        this.data.results = jsonataResult;\n      }\n    } catch (err) {\n      this.data.results = err.message || String(err);\n      this.jsonataEditor.addErrorDecorationFromErr(err);\n    }\n    this.editorOverwrite(this.resultsEditor, this.data.results);\n  }\n\n  clearMarkers() {\n    this.jsonataEditor.clearDecorations();\n    this.jsonatabindingEditor.clearDecorations();\n    this.jsonEditor.clearDecorations();\n  }\n\n  evalJsonata(input, binding) {\n    const expr = window.jsonataExtended(this.data.jsonata);\n\n    expr.assign('trace', function (arg) {\n      console.log(arg);\n    });\n\n    if (!this.local) {\n      this.timeboxExpression(expr, 3000, 750);\n    }\n\n    let pathresult = expr.evaluate(input, binding);\n    if (typeof pathresult === 'undefined') {\n      pathresult = '** no match **';\n    } else {\n      pathresult = JSON.stringify(\n        pathresult,\n        function (key, val) {\n          return typeof val !== 'undefined' && val !== null && val.toPrecision\n            ? Number(val.toPrecision(13))\n            : val && (val._jsonata_lambda === true || val._jsonata_function === true)\n            ? '{function:' + (val.signature ? val.signature.definition : '') + '}'\n            : typeof val === 'function'\n            ? '<native function>#' + val.length\n            : val;\n        },\n        2\n      );\n    }\n    return pathresult;\n  }\n\n  timeboxExpression(expr, timeout, maxDepth) {\n    let depth = 0;\n    const time = Date.now();\n\n    const checkRunnaway = function () {\n      if (depth > maxDepth) {\n        // stack too deep\n        // eslint-disable-next-line  no-throw-literal\n        throw {\n          code: 'U1001',\n          message:\n            'Stack overflow error: Check for non-terminating recursive function.  Consider rewriting as tail-recursive.',\n          stack: new Error().stack,\n        };\n      }\n      if (Date.now() - time > timeout) {\n        // expression has run for too long\n        // eslint-disable-next-line  no-throw-literal\n        throw {\n          code: 'U1002',\n          message: 'Expression evaluation timeout: Check for infinite loop',\n          stack: new Error().stack,\n        };\n      }\n    };\n\n    // register callbacks\n    expr.assign('__evaluate_entry', function () {\n      depth++;\n      checkRunnaway();\n    });\n    expr.assign('__evaluate_exit', function () {\n      depth--;\n      checkRunnaway();\n    });\n  }\n\n  render() {\n    const options = {\n      minimap: { enabled: false },\n      lineNumbers: 'off',\n      contextmenu: false,\n      automaticLayout: true,\n      scrollBeyondLastLine: false,\n      extraEditorClassName: 'editor-pane',\n    };\n\n    const resultsoptions = {\n      lineNumbers: 'off',\n      minimap: { enabled: false },\n      automaticLayout: true,\n      contextmenu: false,\n      scrollBeyondLastLine: false,\n      readOnly: true,\n      extraEditorClassName: 'result-pane',\n    };\n\n    return (\n      <Container fluid>\n        <MainNav\n          sources={this.sources}\n          onSourceSelect={this.changeData.bind(this)}\n          version={version}\n        />\n        <Row>\n          <Col>\n            <Tabs defaultActiveKey=\"transform\" transition={false} id=\"transform-config\">\n              <Tab eventKey=\"transform\" title=\"Transform\" className=\"border\">\n                <EnhancedMonacoEditorWithNav\n                  language=\"jsonata\"\n                  theme=\"jsonataTheme\"\n                  options={options}\n                  onChange={this.onChangeExpression.bind(this)}\n                  editorDidMount={this.jsonataEditorDidMount.bind(this)}\n                  label=\"Transform\"\n                  formatEnabled={false}\n                />\n              </Tab>\n              <Tab eventKey=\"jsonatabinding\" title=\"JSONata Binding\" className=\"border\">\n                <EnhancedMonacoEditorWithNav\n                  language=\"json\"\n                  theme=\"jsonataTheme\"\n                  options={options}\n                  onChange={this.onChangejsonatabinding.bind(this)}\n                  editorDidMount={this.jsonatabindingEditorDidMount.bind(this)}\n                  label=\"JSONata Binding\"\n                  moreinfo=\"https://docs.jsonata.org/embedding-extending#expressionevaluateinput-bindings-callback\"\n                  moreinfolabel=\"More info on binding\"\n                />\n              </Tab>\n            </Tabs>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <Tabs defaultActiveKey=\"results\" transition={false} id=\"transform-data\">\n              <Tab eventKey=\"source\" title=\"Source Data\" className=\"border\">\n                <EnhancedMonacoEditorWithNav\n                  language=\"json\"\n                  theme=\"jsonataTheme\"\n                  options={options}\n                  onChange={this.onChangeData.bind(this)}\n                  editorDidMount={this.jsonEditorDidMount.bind(this)}\n                  label=\"Source Data\"\n                />\n              </Tab>\n              <Tab eventKey=\"results\" title=\"Results\" className=\"border\">\n                <EnhancedMonacoEditorWithNav\n                  language=\"json\"\n                  theme=\"jsonataTheme\"\n                  options={resultsoptions}\n                  editorDidMount={this.resultsEditorDidMount.bind(this)}\n                  label=\"Results\"\n                  downloadCSVEnabled={true}\n                />\n              </Tab>\n            </Tabs>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default ExerciserBootstrap;\n","import React, { Component } from 'react';\nimport ExerciserBootstrap from './ExerciserBootstrap';\n\nclass App extends Component {\n  render() {\n    return <ExerciserBootstrap />;\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","/**\n *  Copyright IBM Corp. 2020 All Rights Reserved\n *   Project name: JSONata\n *   This project is licensed under the MIT License, see LICENSE\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}